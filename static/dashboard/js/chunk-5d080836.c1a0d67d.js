(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d080836"],{"2d60":function(t,n,e){"use strict";e("d733")},4039:function(t,n,e){"use strict";e.r(n);e("b0c0");var i=function(){var t=this,n=t._self._c;return n("uc",{staticClass:"m-dashboard-honor m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[n("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[n("div",{staticClass:"m-honor"},[n("div",{staticClass:"m-honor-left"},[n("div",{staticClass:"u-header-info"},[n("Avatar",{staticClass:"u-author-avatar",attrs:{uid:t.uid,url:t.avatar,size:t.avatarSize(),frame:t.avatar_frame}}),n("div",{staticClass:"u-author-info"},[n("span",{staticClass:"u-name"},[n("span",{on:{click:function(n){return t.copyData(t.data.display_name||"匿名")}}},[t._v(t._s(t.data.display_name||"匿名"))]),t._v(" "),n("span",{staticClass:"u-uid",on:{click:function(n){return t.copyData(t.data.ID||0)}}},[t._v("(UID : "+t._s(t.data.ID||0)+")")])]),n("div",{staticClass:"u-tips"},[n("el-tooltip",{attrs:{content:"当前经验 ".concat(t.data.experience||0),placement:"top"}},[n("span",{staticClass:"u-level",class:"lv-"+t.level,style:{backgroundColor:t.showLevelColor(t.level)}},[t._v("Lv."+t._s(t.level))])]),t.isPRO||t.isVIP?n("el-tooltip",{attrs:{content:t.vipTypeTitle,placement:"top"}},[n("span",{staticClass:"u-vip",attrs:{target:"_blank"}},[n("i",{staticClass:"u-icon vip"},[t._v(t._s(t.vipType))])])]):t._e(),t.isSuperAuthor?n("el-tooltip",{attrs:{content:"签约作者",placement:"top"}},[n("span",{staticClass:"u-superauthor"},[n("i",{staticClass:"u-icon superauthor"},[t._v("签约作者")])])]):t._e()],1),t.isSelect.isCustomize?t._e():n("div",{staticClass:"u-honor",style:{backgroundImage:"url(".concat(t.imgUrl(t.isSelect),")")}},[n("span",{style:{color:t.isSelect.color}},[t._v(t._s(t.isSelect.name))])])])],1)]),n("div",{staticClass:"m-honor-right"},[n("div",{staticClass:"u-honor-list"},[n("div",{staticClass:"u-title"},[n("span",{staticClass:"u-name"},[n("i",{staticClass:"el-icon-collection-tag"}),t._v("称号")]),n("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=honor",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),n("div",{staticClass:"u-honor-item"},t._l(t.honorList,(function(e,i){return n("div",{key:i,staticClass:"u-picbox"},[n("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.name))]),n("div",{staticClass:"u-pic",class:t.setClass(e),on:{click:function(n){return t.selectChange(e)}}},[e.isCustomize?n("div",{staticClass:"u-noHonor"}):n("el-image",{attrs:{src:t.imgUrl(e),fit:"contain"}})],1)])],1)})),0)])])]),n("div",{staticClass:"m-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),n("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},a=[],r=e("5530"),o=(e("99af"),e("ac1f"),e("466d"),e("a9e3"),e("5319"),e("d81d"),e("7db0"),e("d3b7"),e("159b"),e("b547")),s=e("46c1"),c=e("c9d2"),u=e("8e44"),l=e("65c2"),d=e("aa38"),f=e("2ef0"),v={name:"honor",props:[],data:function(){return{tabList:s["d"],isVIP:!1,info:{uid:c["a"].getInfo().uid,name:"匿名",user_avatar:"".concat(l["__imgPath"],"/image/common/avatar.png"),user_avatar_frame:"default",bio:"-",sign:0},isSelect:{},honorList:[],list:[],isSelectBak:{}}},computed:{uid:function(){return c["a"].getInfo().uid},data:function(){return this.info},avatar:function(){return this.data.user_avatar||""},avatar_frame:function(){return this.data.user_avatar_frame||""},isPRO:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.is_pro},isSuperAuthor:function(){var t;return!(null===(t=this.data)||void 0===t||!t.sign)},vipType:function(){return this.isPRO?"PRO":"PRE"},vipTypeTitle:function(){return this.isPRO?"专业版会员用户":"高级版会员用户"},level:function(){var t;return c["a"].getLevel((null===(t=this.data)||void 0===t?void 0:t.experience)||0)}},methods:{imgUrl:function(t){return l["__imgPath"]+"decoration/honor/".concat(t.img,"/").concat(t.img,".").concat(t.img_ext)},setClass:function(t){return t.isHave?t.using?"select":void 0:"noHave"},avatarSize:function(){var t=document.body.clientWidth||document.documentElement.clientWidth;return t>500?"m":"s"},loadUserInfo:function(){var t=this;Object(u["b"])().then((function(n){n.data.data&&(t.info=n.data.data)}))},disposeHonor:function(t){var n=t||{},e=(null===t||void 0===t?void 0:t.honor)||{},i=e.only,a=e.prefix,r=e.prefix.match(/(?<=\{)(.+?)(?=\})/g),o=e.ranking,s=e.year||"";if(i?s=a:r?n&&(s+=(null===t||void 0===t?void 0:t[r[0]])||""):s+=a,(null===o||void 0===o?void 0:o.length)>0&&n){n.imgIndex=0;for(var c=0;c<o.length;c++)if(void 0!=(null===t||void 0===t?void 0:t.ranking)&&Object(f["inRange"])(Number(null===t||void 0===t?void 0:t.ranking),o[c][0],o[c][1])){n.imgIndex=c;var u=o[c][2],l=u.match(/(?<=\{)(.+?)(?=\})/g);s+=l?u.replace(/\{([^{}]+?)\}/g,(function(e,i){return n[i]||t[i]||""})):u;break}}return s+e.suffix},loadHonor:function(){var t=this;Object(d["e"])().then((function(n){t.honorList=n.data.data.list,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(d["f"])(this.uid).then((function(n){var e=n;t.honorList=t.honorList.map((function(n){var i=e.find((function(t){return t.honor_id==n.id}));i&&(n.isHave=!0);var a=e.find((function(t){return t.honor_id==n.id&&1==t.using}));return a&&(n.using=1),n.name=t.disposeHonor(Object(r["a"])(Object(r["a"])({},i),{},{honor:n})),n}));var i=t.honorList.find((function(t){return 1==t.using})),a={type:"honor_customize",img:"不佩戴称号",name:"取消佩戴称号",using:i?0:1,isHave:!0,isCustomize:!0};t.isSelect=i||a,t.honorList.unshift(a),t.list=Object(f["cloneDeep"])(t.honorList)}))},selectChange:function(t){t.isHave&&(this.honorList.forEach((function(t){t.using=0})),t.using=1,this.isSelect=t)},reset:function(){this.$set(this,"honorList",Object(f["cloneDeep"])(this.list)),this.$set(this,"isSelect",Object(f["cloneDeep"])(this.isSelectBak))},showLevelColor:function(t){return l["__userLevelColor"][t]},submit:function(){var t,n=this,e=null===(t=this.honorList)||void 0===t?void 0:t.find((function(t){return 1==t.using}));null!==e&&void 0!==e&&e.id?Object(d["i"])(e.id).then((function(t){n.$message({message:"称号更新成功",type:"success"})})):Object(d["a"])().then((function(t){n.$message({message:"称号更新成功",type:"success"})}))}},mounted:function(){this.loadUserInfo(),this.loadHonor()},components:{uc:o["a"]}},p=v,h=(e("2d60"),e("2877")),b=Object(h["a"])(p,i,a,!1,null,null,null);n["default"]=b.exports},"51eb":function(t,n,e){"use strict";var i=e("825a"),a=e("485a"),r=TypeError;t.exports=function(t){if(i(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw r("Incorrect hint");return a(this,t)}},5530:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));e("b64b"),e("a4d3"),e("4de4"),e("d3b7"),e("e439"),e("14d9"),e("159b"),e("dbb4");var i=e("ade3");function a(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function r(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?a(Object(e),!0).forEach((function(n){Object(i["a"])(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}},8172:function(t,n,e){var i=e("e065"),a=e("57b9");i("toPrimitive"),a()},aa38:function(t,n,e){"use strict";e.d(n,"b",(function(){return s})),e.d(n,"h",(function(){return c})),e.d(n,"c",(function(){return u})),e.d(n,"d",(function(){return l})),e.d(n,"g",(function(){return d})),e.d(n,"j",(function(){return f})),e.d(n,"e",(function(){return v})),e.d(n,"f",(function(){return p})),e.d(n,"i",(function(){return h})),e.d(n,"a",(function(){return b}));e("99af");var i=e("41cb"),a=e("bc3a"),r=e.n(a),o=e("65c2");function s(t){return Object(i["b"])().get("/api/cms/user/decoration",{params:t})}function c(t){return Object(i["b"])().post("/api/cms/user/decoration",t)}function u(){var t=o["__imgPath"]+"decoration/index.json?".concat(Date.now(),"}");return r.a.get(t)}function l(){return r.a.get("".concat(o["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function d(t,n){return Object(i["b"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(n,"/for/avatar"))}function f(t){return Object(i["b"])().put("/api/cms/user/my/avatar-frame",t)}function v(){return Object(i["b"])().get("/api/cms/user/config/honor")}function p(t){return Object(i["c"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function h(t){return Object(i["b"])().put("/api/cms/user/honor/use/".concat(t))}function b(){return Object(i["b"])().delete("/api/cms/user/honor/use")}},ade3:function(t,n,e){"use strict";e.d(n,"a",(function(){return o}));var i=e("53ca");e("8172"),e("efec"),e("a4d3"),e("e01a"),e("d3b7"),e("d9e2"),e("a9e3");function a(t,n){if("object"!==Object(i["a"])(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var a=e.call(t,n||"default");if("object"!==Object(i["a"])(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}function r(t){var n=a(t,"string");return"symbol"===Object(i["a"])(n)?n:String(n)}function o(t,n,e){return n=r(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}},d733:function(t,n,e){},dbb4:function(t,n,e){var i=e("23e7"),a=e("83ab"),r=e("56ef"),o=e("fc6a"),s=e("06cf"),c=e("8418");i({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var n,e,i=o(t),a=s.f,u=r(i),l={},d=0;while(u.length>d)e=a(i,n=u[d++]),void 0!==e&&c(l,n,e);return l}})},e439:function(t,n,e){var i=e("23e7"),a=e("d039"),r=e("fc6a"),o=e("06cf").f,s=e("83ab"),c=!s||a((function(){o(1)}));i({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(t,n){return o(r(t),n)}})},efec:function(t,n,e){var i=e("1a2d"),a=e("cb2d"),r=e("51eb"),o=e("b622"),s=o("toPrimitive"),c=Date.prototype;i(c,s)||a(c,s,r)}}]);
//# sourceMappingURL=chunk-5d080836.c1a0d67d.js.map