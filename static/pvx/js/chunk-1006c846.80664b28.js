(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1006c846"],{"015b":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"wrap",staticClass:"cross-wrapper",class:"m-".concat(t.type)},[t.isShow?[e("div",{staticClass:"cross cross-left",class:!t.isInLeft&&"active",style:{width:t.width+"px","border-top-left-radius":t.radius+"px","border-bottom-left-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toLeft.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-left"})]),e("div",{staticClass:"cross cross-right",class:!t.isInRight&&"active",style:{width:t.width+"px","border-top-right-radius":t.radius+"px","border-bottom-right-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toRight.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-right"})])]:t._e(),e("div",{ref:"list",staticClass:"list"},t._l(t.list,(function(i,a){return e("div",{key:i.id||i.ID+i.ItemID||a,staticClass:"item",style:{"margin-right":t.gap+"px"}},[t._t("default",null,{item:i})],2)})),0)],2)},n=[],s=(i("a9e3"),{name:"Cross",props:{list:{type:Array,required:!0},width:{type:Number,default:60},gap:{type:Number,default:20},radius:{type:Number,default:10},offset:{type:Object,default:function(){return{top:0,left:0,right:0,bottom:0}}},type:{type:String,default:"rare"},arrow:{type:Number,default:1}},data:function(){return{scrollLeft:0,isInLeft:!0,isInRight:!1,isShow:!1}},methods:{toLeft:function(t){t.preventDefault(),this.isInRight=!1,this.scroll(-this.arrow)},toRight:function(t){t.preventDefault(),this.isInLeft=!1,this.scroll(this.arrow)},scroll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.$refs.list,a=i.scrollLeft,n=i.scrollWidth,s=i.clientWidth,r=s/2*e,o=null;o=setInterval((function(){e===t.arrow?(i.scrollLeft<a+r?i.scrollLeft+=Math.ceil(r/100):clearInterval(o),Math.ceil(i.scrollLeft+s)>=n&&(t.isInRight=!0,clearInterval(o))):e===-t.arrow&&(i.scrollLeft>a+r?i.scrollLeft+=Math.floor(r/100):clearInterval(o),i.scrollLeft<=0&&(t.isInLeft=!0,clearInterval(o)))}),1)}},mounted:function(){var t=this;this.$nextTick((function(){var e=t.$refs.list,i=e.clientWidth,a=e.scrollWidth;a>i&&(t.isShow=!0)}))}}),r=s,o=(i("685d"),i("2877")),c=Object(o["a"])(r,a,n,!1,null,null,null);e["a"]=c.exports},"03a6":function(t,e,i){},"10f1":function(t,e,i){},"11a3":function(t,e,i){"use strict";i("99af"),i("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-pvx-user"},[t.wiki_post&&t.wiki_post.post?e("div",{staticClass:"m-wiki-post-panel"},[e("WikiPanel",{attrs:{"wiki-post":t.wiki_post}},[e("template",{slot:"head-title"},[e("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 512 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M382.5 109.2C345.1 71.8 296.3 50 243.9 47v110.9c46.7 19.2 79.6 65.2 79.6 118.7 0 58-47.2 105.2-105.2 105.2-47.8 0-86.6-38.9-86.6-86.6 0-39.6 32.2-71.8 71.8-71.8 33.1 0 59.9 26.9 59.9 59.9h-25c0-19.3-15.7-34.9-34.9-34.9-25.8 0-46.8 21-46.8 46.8 0 34 27.6 61.6 61.6 61.6 44.2 0 80.1-35.9 80.1-80.1 0-57-46.3-103.3-103.3-103.3C122.3 173.3 63 232.6 63 305.6 63 398.4 138.5 474 231.4 474c57.1 0 110.7-22.2 151.1-62.6 40.4-40.4 62.6-94 62.6-151.1s-22.2-110.7-62.6-151.1z"}})]),e("span",{staticClass:"u-txt"},[t._v(t._s(t.name)+"攻略")])]),e("template",{slot:"head-actions"},[e("a",{staticClass:"el-button el-button--primary",attrs:{href:t.publish_url("".concat(t.type,"/").concat(t.id))}},[e("i",{staticClass:"el-icon-edit"}),e("span",[t._v("完善"+t._s(t.name)+"攻略")])])]),e("template",{slot:"body"},[t.compatible?e("div",{staticClass:"m-wiki-compatible"},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 暂无缘起攻略，以下为重制攻略，仅作参考，"),e("a",{staticClass:"s-link",attrs:{href:t.publish_url("".concat(t.type,"/").concat(t.id))}},[t._v("参与修订")]),t._v("。 ")]):t._e(),e("Article",{attrs:{content:t.wiki_post.post.content}}),e("div",{staticClass:"m-wiki-signature"},[e("i",{staticClass:"el-icon-edit"}),t._v(" 本次修订由 "),e("b",[t._v(t._s(t.user_name))]),t._v(" 提交于"+t._s(t.updated_at)+" ")])],1)],2),t._t("serendipity"),e("WikiRevisions",{attrs:{type:t.type,"source-id":t.id}})],2):e("div",{staticClass:"m-wiki-post-empty"},[e("i",{staticClass:"el-icon-s-opportunity"}),e("span",[t._v("暂无攻略，我要")]),e("a",{staticClass:"s-link",attrs:{href:t.publish_url("".concat(t.type,"/").concat(t.id))}},[t._v("完善攻略")])]),e("Thx",{key:t.type+"-thx-"+t.id,staticClass:"m-thx",attrs:{postId:t.id,postType:t.type,postTitle:t.wiki_post.source.Name,userId:t.author_id,adminBoxcoinEnable:!1,userBoxcoinEnable:!1,authors:t.authors,mode:"wiki",client:t.client}}),e("WikiComments",{attrs:{type:t.type,"source-id":String(t.id)}})],1)},n=[],s=(i("4de4"),i("d81d"),i("d3b7"),i("9616")),r=i("500d"),o=i("a974"),c=i("662c"),u=i("9307"),l=i("d825"),d=i("85e4"),p={name:"PvxUser",components:{WikiPanel:c["a"],Article:o["a"],WikiRevisions:u["a"],WikiComments:l["a"]},props:{id:{required:!0},name:{type:String,default:""},type:{type:String,required:!0},itemId:{type:String,default:""}},data:function(){return{wiki_post:{source:{},post:null},compatible:!1,is_empty:!0}},watch:{id:{immediate:!0,handler:function(){this.post_id?this.loadRevision():this.loadData()}},post_id:{handler:function(){this.loadRevision()}}},computed:{client:function(){return this.$store.state.client},post_id:function(){return this.itemId||this.$route.params.post_id},isRevision:function(){return this.itemId?!!this.itemId:!!this.$route.params.post_id},author_id:function(){var t,e;return~~(null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.user_id)},user_name:function(){var t,e;return null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.user_nickname},updated_at:function(){var t,e;return Object(d["ts2str"])(null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.updated)},fav_title:function(){var t,e;return null===(t=this.wiki_post)||void 0===t||null===(e=t.source)||void 0===e?void 0:e.Name},authors:function(){var t,e,i;return this.isRevision?[]:(null===(t=this.wiki_post)||void 0===t||null===(e=t.users)||void 0===e||null===(i=e.filter((function(t){return t.id})))||void 0===i?void 0:i.map((function(t){return{user_id:t.id,user_avatar:t.avatar,display_name:t.nickname}})))||[]}},methods:{getLink:d["getLink"],loadData:function(){var t=this;this.id&&r["a"].mix({type:this.type,id:this.id,client:this.client}).then((function(e){var i=e.post,a=e.source,n=e.compatible,s=e.isEmpty,r=e.users;t.wiki_post={post:i,source:a,users:r},t.is_empty=s,t.compatible=n})),this.triggerStat()},loadRevision:function(){var t=this;r["a"].getById(this.post_id).then((function(e){var i;t.wiki_post=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.data})),this.triggerStat()},publish_url:d["publishLink"],triggerStat:function(){"origin"==this.client?Object(s["b"])("origin_".concat(type),this.id):Object(s["b"])(this.type,this.id)}}},m=p,f=(i("4f8c"),i("2877")),h=Object(f["a"])(m,a,n,!1,null,null,null);e["a"]=h.exports},"3af8":function(t,e,i){"use strict";i("10f1")},"4c2b":function(t,e,i){},"4f8c":function(t,e,i){"use strict";i("9d43")},"51eb":function(t,e,i){"use strict";var a=i("825a"),n=i("485a"),s=TypeError;t.exports=function(t){if(a(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw new s("Incorrect hint");return n(this,t)}},5530:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("a4d3"),i("4de4"),i("14d9"),i("e439"),i("dbb4"),i("b64b"),i("d3b7"),i("159b");var a=i("ade3");function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}},"685d":function(t,e,i){"use strict";i("4c2b")},"74e8":function(t,e,i){"use strict";i.r(e);i("b0c0"),i("a9e3");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"horse-single-wrapper m-single-wrapper"},[e("div",{staticClass:"back-wrap"},[e("el-button",{on:{click:t.goBack}},[t._v("返回列表")])],1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"horse-single-content"},[e("div",{staticClass:"main-info-wrapper"},[t.item.ID?e("div",{staticClass:"main-info-wrap"},[e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"info-item"},[e("span",{staticClass:"u-id"},[t._v("ID: "+t._s(t.item.ID))]),e("span",{staticClass:"u-name"},[t._v(t._s(t.item.Name))])]),e("div",{staticClass:"info-item u-desc"},[e("span",[t._v(" 分类: "+t._s(t.displayType)+" ")]),e("span",[t._v("品质: "+t._s(t.item.Level))]),"2"!==t.type?e("span",[t._v("跑速: "+t._s(t.speedName))]):t._e(),"2"!==t.type?e("span",[t._v("饲料: "+t._s(t.feedName))]):t._e()]),e("div",{staticClass:"info-item u-desc"},[e("div",{staticClass:"u-title"},[t._v("基础属性")]),t.basicAttrs.length?e("div",{staticClass:"u-list"},t._l(t.basicAttrs,(function(i){return e("div",{key:i.id,staticClass:"u-attr"},[e("el-tooltip",{attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",staticStyle:{cursor:"default"},attrs:{src:i.iconUrl,alt:i.name}})])],1)})),0):e("div",{staticClass:"no-data"},[t._v("无")])]),e("div",{staticClass:"info-item u-desc"},[e("div",{staticClass:"title"},[t._v("特殊属性")]),t.magicAttrs.length?e("div",{staticClass:"u-list"},t._l(t.magicAttrs,(function(i,a){return e("div",{key:a,staticClass:"u-attr"},[e("el-tooltip",{attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:i.iconUrl,alt:i.name}})])],1)})),0):e("div",{staticClass:"no-data"},[t._v("无")])]),e("a",{staticClass:"u-link",attrs:{href:t.getLink("item",this.id),target:"_blank"}},[e("i",{staticClass:"el-icon-collection-tag"}),t._v(" 物品信息 ")])]),e("div",{staticClass:"img-wrap",class:"u-quality-bg--"+t.item.Quality},[15===t.item.SubType?e("img",{staticClass:"u-image",attrs:{src:t.getImgSrc(t.item)}}):t._e()])]):e("div",[t._v("无此信息")])]),t.sameList.length?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.sameLoading,expression:"sameLoading"}],staticClass:"same-list-container"},[e("div",{staticClass:"title"},[t._v("同类坐骑")]),e("list-cross",{staticClass:"m-horse-list",attrs:{width:30,list:t.sameList},scopedSlots:t._u([{key:"default",fn:function(i){return[e("same-item",{attrs:{item:i.item},nativeOn:{click:function(e){return t.getHorse(i.item.ItemID)}}})]}}],null,!1,3449755589)})],1):t._e(),t.originDatas.length?e("div",{staticClass:"catch-container"},[e("div",{staticClass:"title"},[t._v("捕获地图")]),e("horse-map",{attrs:{name:t.item.Name,list:t.originDatas}})],1):t._e(),e("pvx-user",{attrs:{id:t.id,name:"坐骑",type:"item"}})],1)])},n=[],s=(i("4de4"),i("7db0"),i("d81d"),i("14d9"),i("fb6a"),i("d3b7"),i("ac1f"),i("466d"),i("5319"),i("159b"),i("f252")),r=i("85e4"),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"same-item"},[e("div",{staticClass:"img-wrap",class:"u-quality-bg--"+t.item.Quality},[15===t.item.SubType?e("img",{staticClass:"u-image",attrs:{src:t.item.imgUrl}}):t._e()]),e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"info-item name"},[t._v(t._s(t.item.Name))]),e("div",{staticClass:"info-item id"},[t._v("ID: "+t._s(t.item.ID))]),e("div",{staticClass:"info-item u-attr-wrap"},[e("div",{staticClass:"u-attr-content"},t._l(t.item.MagicAttributes||[],(function(i,a){return e("div",{key:a,staticClass:"u-attr"},[e("el-tooltip",{attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:i.iconUrl,alt:i.name}})])],1)})),0)])]),e("div",{staticClass:"gradient-right"})])},c=[],u={name:"SameItem",props:{item:{type:Object,required:!0}},methods:{}},l=u,d=(i("3af8"),i("2877")),p=Object(d["a"])(l,o,c,!1,null,null,null),m=p.exports,f=i("015b"),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-horse-map"},[e("el-carousel",{attrs:{autoplay:!1,height:t.height}},t._l(t.mapDatas,(function(i,a){return e("el-carousel-item",{key:a},[e("jx3box-map",{attrs:{mapId:Number(a),datas:i},on:{resize:t.handleResize}})],1)})),1)],1)},v=[],g=i("b85c"),b=(i("99af"),i("abab")),y={name:"HorseMap",props:{name:{type:String,required:!0},list:{type:Array,required:!0}},components:{Jx3boxMap:b["a"]},data:function(){return{height:"896px"}},computed:{mapDatas:function(){var t,e={},i=this.name,a=Object(g["a"])(this.list);try{for(a.s();!(t=a.n()).done;){var n=t.value,s=n.mapId;e[s]||(e[s]=[]);var r,o=Object(g["a"])(n.coordinates);try{for(o.s();!(r=o.n()).done;){var c=r.value;e[s].push({title:n.mapName,content:"\n                        马驹·".concat(i.indexOf("·")>-1?i.split("·")[0]:i,"\n                        <br /> 坐标：(").concat(c.x,",").concat(c.y,",").concat(c.z,")"),x:c.x,y:c.y,z:c.z})}}catch(u){o.e(u)}finally{o.f()}}}catch(u){a.e(u)}finally{a.f()}return e}},methods:{handleResize:function(t){this.height=t[1]+"px"}}},_=y,x=Object(d["a"])(_,h,v,!1,null,null,null),w=x.exports,S=i("11a3"),C=i("f34a"),L=i("ef56"),k={name:"Single",inject:["__imgRoot","__imgRoot2"],components:{SameItem:m,ListCross:f["a"],HorseMap:w,PvxUser:S["a"]},data:function(){return{loading:!1,sameLoading:!1,item:{},sameList:[]}},computed:{originDatas:function(){var t=this.item.Name;if(t){var e=C.find((function(e){return t.indexOf(e.name)>-1}))?C.find((function(e){return t.indexOf(e.name)>-1})).mapList:[],i=[];return e.length&&e.forEach((function(t){i.push({mapId:t,mapName:L[t].mapName,coordinates:L[t].coordinates})})),i}return[]},id:function(){return this.$route.params.id},type:function(){return this.$route.query.type},client:function(){return this.$store.state.client},basicAttrs:function(){var t=this.item.MagicAttributes;return t&&t.length?t.filter((function(t){return!t.level||"0"===t.level})).map((function(t){return t.iconUrl=Object(r["iconLink"])(t.icon),t})):[]},magicAttrs:function(){var t=this.item.MagicAttributes;return t&&t.length?t.filter((function(t){return t.icon&&"0"!==t.level})).map((function(t){return t.iconUrl=Object(r["iconLink"])(t.icon),t})):[]},typeName:function(){var t=this.item,e="";return 15===t.SubType?e=0===t.DetailType?"普通坐骑":"奇趣坐骑":23===t.SubType&&(e=0===t.DetailType?"头饰":1===t.DetailType?"鞍饰":2===t.DetailType?"足饰":3===t.DetailType?"马饰":"马具"),e},modeName:function(){var t="",e=this.item;return 15===e.SubType&&e.MagicAttributes&&e.MagicAttributes.length&&(t=e.MagicAttributes.find((function(t){return"15650"===t.id}))?e.MagicAttributes.find((function(t){return"15650"===t.id})).name:"单骑"),t},feedName:function(){var t=this.item,e="";if(15===t.SubType&&t.Feed){var i=t.Feed.FeedTip.indexOf("【"),a=t.Feed.FeedTip.indexOf("】");e=t.Feed.FeedTip.slice(i,a+1)}return e},speedName:function(){var t=this.item,e="";return t.MoveSpeed&&(e=t.MoveSpeedDesc.split("移动速度提高")[1]),e},displayType:function(){var t=this.typeName;return"2"!==this.type&&(t+=" · ".concat(this.modeName),this.item.GetType&&(t+=" · ".concat(this.item.GetType))),t}},watch:{id:function(t){this.getHorse(t)}},methods:{goBack:function(){this.$router.push({path:"/"})},getHorse:function(t){var e=this,i={id:t||this.id,client:this.client};"2"===this.type&&(i.type=2),this.loading=!0,Object(s["e"])(i).then((function(t){e.loading=!1,e.item=t.data||{};var i=t.data.Name;"普通坐骑"===e.typeName&&(i=t.data.Name.split("·")[0]),"2"!==e.type&&i&&e.getSameHorses(i)})).finally((function(){e.loading=!1}))},getSameHorses:function(t){var e=this,i={page:1,pageSize:50,client:this.client,keyword:t};this.sameLoading=!0,Object(s["f"])(i).then((function(t){e.sameLoading=!1,e.sameList=t.data.list.filter((function(t){return t.ID!==e.item.ID})).map((function(t){return t.imgUrl=e.getImgSrc(t),t.MagicAttributes&&t.MagicAttributes.length&&t.MagicAttributes.map((function(t){return t.iconUrl=Object(r["iconLink"])(t.icon),t})),t}))})).finally((function(){e.sameLoading=!1}))},getImgSrc:function(t){var e=t.ImgPath;if(e){var i=e.toLowerCase().match(/.*[\/,\\]homeland(.*?).tga/),a=null===i||void 0===i?void 0:i[1].replace(/\\/g,"/");return"default"==(null===i||void 0===i?void 0:i[1])?this.__imgRoot+"homeland/".concat(this.client)+"/default/default.png":this.__imgRoot+"homeland/".concat(this.client)+a+".png"}return this.__imgRoot2+"".concat(this.client,"/")+t.ID+".png"},getLink:r["getLink"]},mounted:function(){this.getHorse()}},I=k,O=(i("984a"),Object(d["a"])(I,a,n,!1,null,null,null));e["default"]=O.exports},8172:function(t,e,i){"use strict";var a=i("e065"),n=i("57b9");a("toPrimitive"),n()},"984a":function(t,e,i){"use strict";i("ff49")},"9d43":function(t,e,i){},abab:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"component",staticClass:"c-map"},[e("div",{ref:"wrapper",staticClass:"u-map__wrapper",style:t.wrapperSize},[e("div",{staticClass:"u-map__inner",style:t.innerStyle},[e("img",{staticClass:"u-map-img",attrs:{refs:"img",src:t.mapImg,draggable:"false"}}),t.overview?e("div",{staticClass:"u-map-title__wrapper"},[t._t("title",(function(){return[e("div",{staticClass:"u-map-title"},[t._v(t._s(t.mapName))])]}),{title:t.mapName})],2):t._e(),t._l(t.datas,(function(i,a){return[e("div",{key:a,staticClass:"u-map-point__wrapper",style:t.pointStyle(i),attrs:{"data-index":a}},[t._t("point",(function(){return[e("el-popover",{attrs:{"popper-class":"u-map-point__popover",placement:"top",width:"200",trigger:"hover"}},[t._t("popover",(function(){return[e("div",[t.overview?t._e():e("div",{staticClass:"u-map-title"},[t._v(t._s(t.mapName))]),e("div",[t._v(t._s(i.title))]),e("div",{domProps:{innerHTML:t._s(i.content)}})])]}),{data:i}),e("span",{staticClass:"u-map-point",attrs:{slot:"reference"},slot:"reference"})],2)]}),{data:i})],2)]}))],2)])])},n=[],s=i("5530"),r=(i("99af"),i("7db0"),i("d81d"),i("a9e3"),i("b64b"),i("d3b7"),i("65c2"));const{__imgPath:o}=r,c=()=>fetch(o+"/map/data/map_scales.json").then(t=>t.json());var u={name:"Jx3boxMap",props:{mapId:{type:Number,default:1},datas:{type:Array,default:function(){return[]}},overview:{type:Boolean,default:!0},focus:{type:Number,default:void 0},trimBorder:{type:Boolean,default:!1},mapDraggable:{type:Boolean,default:!1},pointDraggable:{type:Boolean,default:!1},mapFollow:{type:Boolean,default:!0}},data:function(){return{outerWidth:0,outerHeight:0,innerLeft:0,innerBottom:0,mapScales:{}}},computed:{innerWidth:function(){return this.overview?this.outerWidth:1024},innerHeight:function(){return this.overview?this.outerHeight:896},wrapperSize:function(){return{width:this.outerWidth+"px",height:this.outerHeight+"px"}},focusPoint:function(){return void 0!=this.focus?this.datas[this.focus]:null!==(t=this.datas.find((function(t){return t.focus})))&&void 0!==t?t:this.datas[0];var t},innerStyle:function(){var t={width:this.innerWidth+"px",height:this.innerHeight+"px"};if(this.overview)return t;var e=this.offsetLimit(this.innerLeft,this.innerBottom),i=e.left,a=e.bottom;return Object(s["a"])(Object(s["a"])({},t),{},{left:i+"px",bottom:a+"px"})},subId:function(){var t=this.mapScales[this.mapId];if(!t||Object.keys(t)<=1)return 0;var e=0,i=0;for(var a in t){var n={x:t[a].StartX,y:t[a].StartY,width:t[a].Width/t[a].Scale,height:t[a].Height/t[a].Scale};this.isPointsInRect(n)&&t[a].Scale>i&&(e=a,i=t[a].Scale)}return e},mapName:function(){var t,e;return null===(t=this.mapScales[this.mapId])||void 0===t||null===(e=t[this.subId])||void 0===e?void 0:e.Name},mapScale:function(){var t;return null===(t=this.mapScales[this.mapId])||void 0===t?void 0:t[this.subId]},mapImg:function(){return"".concat(r.__imgPath,"map/maps/map_").concat(this.mapId,"_").concat(this.subId,".png")}},mounted:function(){this.fetchMapScales(),this.$nextTick((function(){this.bindUpdateSizeListener(),this.bindDraggerListener()}))},beforeDestroy:function(){window.removeEventListener("resize",this.updateSize)},methods:{pointPosition:function(t){var e=this.mapScale;if(!e)return{left:0,bottom:0};var i=e.Width/e.Scale,a=e.Height/e.Scale,n=(t.x-e.StartX)/i*this.innerWidth,s=(t.y-e.StartY)/a*this.innerHeight;return{left:n,bottom:s}},gamePosition:function(t,e){var i=this.mapScale;if(!i)return{x:0,y:0};var a=i.Width/i.Scale,n=i.Height/i.Scale,s=t/this.innerWidth*a+i.StartX,r=e/this.innerHeight*n+i.StartY;return{x:s,y:r}},pointStyle:function(t){var e=this.pointPosition(t),i=e.left,a=e.bottom;return{left:i+"px",bottom:a+"px"}},isPointsInRect:function(t){var e=this.datas.map((function(t){return{x:t.x,y:t.y}}));return e.every((function(e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}))},initInnerOffset:function(t){if(this.overview)return{x:0,y:0};var e={x:this.outerWidth/2,y:this.outerHeight/2},i=this.pointPosition(t);this.innerLeft=e.x-i.left,this.innerBottom=e.y-i.bottom},fetchMapScales:function(){var t=this;c().then((function(e){t.mapScales=e,t.initInnerOffset(t.focusPoint)}))},updateSize:function(){var t;if(this.outerWidth=null===(t=this.$refs["component"])||void 0===t?void 0:t.clientWidth,this.outerWidth){var e;if(this.overview)this.outerHeight=this.outerWidth/(1024/896);else this.outerHeight=null===(e=this.$refs["component"])||void 0===e?void 0:e.clientHeight;this.$emit("resize",[this.outerWidth,this.outerHeight])}},bindUpdateSizeListener:function(){var t=this.$refs["component"];t&&(this.updateSize(),t.addEventListener("resize",this.updateSize))},bindDraggerListener:function(){var t=this;if(this.mapDraggable||this.pointDraggable){var e=this.$refs["wrapper"];if(e){var i={},a=function(t){var e=t.target;while(!e.classList.contains("u-map__wrapper")){if(e.classList.contains("u-map-point__wrapper"))return i.pointIndex=Number(e.dataset["index"]),!0;e=e.parentNode}return!1},n=function(e){var a=e.clientX,n=e.clientY;i.dx=a-i.x,i.dy=i.y-n;var s=t.offsetLimit(i.px+i.dx,i.py+i.dy),r=s.left,o=s.bottom;t.innerLeft=r,t.innerBottom=o},s=function(e){var a=e.clientX,n=e.clientY,s=t.datas[i.pointIndex],r=t.mapScale;i.dx=(a-i.x)/r.Scale,i.dy=(i.y-n)/r.Scale;var o=t.positionLimit(i.px+i.dx,i.py+i.dy),c=o.x,u=o.y;s.x=c,s.y=u},r=function(e){i={};var r=e.clientX,c=e.clientY;if(i.x=r,i.y=c,a(e)){if(!t.pointDraggable)return;i.point=t.datas[i.pointIndex],i.type="point-move",i.px=i.point.x,i.py=i.point.y,document.addEventListener("mousemove",s),document.addEventListener("mouseup",o)}else{if(!t.mapDraggable)return;i.type="map-move",i.px=t.innerLeft,i.py=t.innerBottom,document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)}},o=function e(){document.removeEventListener("mousemove",n),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",e),(i.dx||i.dy)&&(t.$emit(i.type,i),t.mapFollow&&"point-move"==i.type&&t.initInnerOffset(i.point))};e.addEventListener("mousedown",r)}}},offsetLimit:function(t,e){var i=0,a=this.outerWidth-this.innerWidth,n=0,s=this.outerHeight-this.innerHeight;return{left:Math.max(Math.min(t,i),a),bottom:Math.max(Math.min(e,n),s)}},positionLimit:function(t,e){var i=this.mapScale.StartX,a=this.mapScale.StartX+this.mapScale.Width/this.mapScale.Scale-1024,n=this.mapScale.StartY,s=this.mapScale.StartY+this.mapScale.Height/this.mapScale.Scale-1024;return{x:Math.max(Math.min(t,a),i),y:Math.max(Math.min(e,s),n)}}}},l=u,d=(i("c2ba"),i("2877")),p=Object(d["a"])(l,a,n,!1,null,"17f22fc4",null);e["a"]=p.exports},ade3:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var a=i("53ca");i("a4d3"),i("e01a"),i("8172"),i("d9e2"),i("efec"),i("a9e3"),i("d3b7");function n(t,e){if("object"!=Object(a["a"])(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=Object(a["a"])(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t){var e=n(t,"string");return"symbol"==Object(a["a"])(e)?e:String(e)}function r(t,e,i){return e=s(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},c2ba:function(t,e,i){"use strict";i("03a6")},dbb4:function(t,e,i){"use strict";var a=i("23e7"),n=i("83ab"),s=i("56ef"),r=i("fc6a"),o=i("06cf"),c=i("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,i,a=r(t),n=o.f,u=s(a),l={},d=0;while(u.length>d)i=n(a,e=u[d++]),void 0!==i&&c(l,e,i);return l}})},e439:function(t,e,i){"use strict";var a=i("23e7"),n=i("d039"),s=i("fc6a"),r=i("06cf").f,o=i("83ab"),c=!o||n((function(){r(1)}));a({target:"Object",stat:!0,forced:c,sham:!o},{getOwnPropertyDescriptor:function(t,e){return r(s(t),e)}})},ef56:function(t){t.exports=JSON.parse('{"13":{"mapName":"金水镇","horses":["龙子","麟驹"],"coordinates":[{"x":51547,"y":17586,"z":1056512}]},"21":{"mapName":"巴陵县","horses":["龙子","麟驹"],"coordinates":[{"x":59030,"y":46042,"z":1056448}]},"22":{"mapName":"南屏山","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":87058,"y":61930,"z":1116416}]},"23":{"mapName":"龙门荒漠","horses":["龙子","麟驹"],"coordinates":[{"x":36139,"y":62593,"z":1065728}]},"30":{"mapName":"昆仑","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":36263,"y":72466,"z":1073792}]},"74":{"mapName":"帮会领地","coordinates":[{"x":17193,"y":25286,"z":1100032}]},"100":{"mapName":"白龙口","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":39766,"y":99090,"z":1120704}]},"101":{"mapName":"无量山","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":78670,"y":112690,"z":1054784}]},"104":{"mapName":"黑龙沼","horses":["里飞沙·踏秋"],"coordinates":[{"x":82823,"y":102579,"z":1054400}]},"105":{"mapName":"苍山洱海","coordinates":[{"x":21128,"y":13890,"z":1140800}]},"216":{"mapName":"阴山大草原","horses":[["龙子·踏莎","麟驹·踏莎"],["绝尘·踏莎","赤蛇·踏莎","闪电·踏莎"],["里飞沙·踏秋"],["赤兔·飞虹"]],"coordinates":[{"x":87078,"y":40830,"z":1089088}]},"217":{"mapName":"黑戈壁","horses":[["龙子·燕歌","麟驹·燕歌"],["绝尘·燕歌","赤蛇·燕歌","闪电·燕歌"],["里飞沙·踏秋"],["赤兔·飞虹"]],"coordinates":[{"x":91514,"y":61046,"z":1077056}]},"411":{"mapName":"鲲鹏岛","horses":[["龙子·潮生","麟驹·潮生"],["绝尘·潮生","赤蛇·潮生","闪电·潮生"],["里飞沙·踏秋"],["赤兔·飞虹"]],"coordinates":[{"x":82174,"y":102429,"z":1092224}]}}')},efec:function(t,e,i){"use strict";var a=i("1a2d"),n=i("cb2d"),s=i("51eb"),r=i("b622"),o=r("toPrimitive"),c=Date.prototype;a(c,o)||n(c,o,s)},f252:function(t,e,i){"use strict";i.d(e,"b",(function(){return l})),i.d(e,"f",(function(){return s})),i.d(e,"e",(function(){return r})),i.d(e,"a",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return u})),i.d(e,"g",(function(){return d}));var a=i("41cb"),n=Object(a["d"])();function s(t){return n.get("/horses",{params:t})}function r(t){return n.get("/horse",{params:t})}function o(t){return n.get("/horse/attrs",{params:t})}function c(t){return n.get("/horse/feeds",{params:t})}function u(t){return Object(a["c"])().get("/api/game/reporter/horse",{params:t})}function l(t){var e={pageIndex:1,pageSize:50,server:t,type:"chitu-horse",subtype:"share_msg"};return Object(a["c"])().get("/api/game/reporter/horse",{params:e})}function d(){return Object(a["a"])().get("/api/cms/user/my/info")}},f34a:function(t){t.exports=JSON.parse('[{"name":"浮云","mapList":["74","105","216","217","411"]},{"name":"绝群","mapList":["74","105","216","217","411"]},{"name":"逸骠","mapList":["74","105","216","217","411"]},{"name":"紫燕骝","mapList":["74","105","216","217","411"]},{"name":"绿螭骢","mapList":["74","105","216","217","411"]},{"name":"龙子","mapList":["13","21","23","216","217","411"]},{"name":"麟驹","mapList":["13","21","23","216","217","411"]},{"name":"绝尘","mapList":["22","30","100","101","216","217","411"]},{"name":"赤蛇","mapList":["22","30","100","101","216","217","411"]},{"name":"闪电","mapList":["22","30","100","101","216","217","411"]},{"name":"里飞沙","mapList":["104","216","217","411"]},{"name":"赤兔","mapList":["216","217","411"]}]')},ff49:function(t,e,i){}}]);
//# sourceMappingURL=chunk-1006c846.80664b28.js.map