(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0126ac54"],{"03a6":function(t,e,i){},"23d0":function(t,e,i){"use strict";i("5f92")},"2efc":function(t,e,i){"use strict";i("b0c0"),i("a9e3");var n=function(){var t=this,e=t._self._c;return e("a",{staticClass:"m-horse-card",class:"u-quality-bg--"+t.item.Quality,attrs:{href:t.getLink(t.item),target:"_blank"}},[15===t.item.SubType?e("el-image",{staticClass:"u-image",attrs:{src:t.getImgSrc(t.item)}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("img",{attrs:{src:t.getImgSrc(t.item,!0)},on:{error:t.replaceByDefault}})])]):e("item-icon",{attrs:{item_id:String(t.item.ItemID),isLink:!1,size:160,onlyIcon:!0}}),e("div",{staticClass:"u-name"},[t._v(t._s(t.item.Name))]),e("div",{staticClass:"u-desc"},[t._v("ID: "+t._s(t.item.ID))]),e("div",{staticClass:"u-img"},[t._l(t.MagicAttributes,(function(i,n){return e("el-tooltip",{key:n,attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+t.$t("级"):""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:i.iconUrl,alt:i.name}})])})),t.count?e("span",{staticClass:"u-more"},[t._v("+"+t._s(t.count))]):t._e()],2)],1)},r=[],a=(i("99af"),i("fb6a"),i("ac1f"),i("466d"),i("5319"),i("ed08")),o=i("bf15"),s={props:{item:{type:Object,required:!0}},components:{ItemIcon:o["a"]},inject:["__imgRoot","__imgRoot2"],data:function(){return{}},computed:{isPhone:function(){return Object(a["b"])()},client:function(){return this.$store.state.client},MagicAttributes:function(){return this.isPhone&&this.item.MagicAttributes,this.item.MagicAttributes.length<=4?this.item.MagicAttributes:this.item.MagicAttributes.slice(0,3)||[]},count:function(){return this.isPhone||this.item.MagicAttributes.length<=4?0:this.item.MagicAttributes.slice(3).length}},methods:{replaceByDefault:function(t){t.target.src=i("d47d")},getLink:function(t){var e=t.ItemID,i=15===t.SubType?1:2;return"/horse/".concat(e,"?type=").concat(i)},getImgSrc:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e?this.client:"std",n=t.ImgPath;if(n){var r=n.toLowerCase().match(/.*[\/,\\]homeland(.*?).tga/),a=null===r||void 0===r?void 0:r[1].replace(/\\/g,"/");return"default"==(null===r||void 0===r?void 0:r[1])?this.__imgRoot+"homeland/".concat(i)+"/default/default.png":this.__imgRoot+"homeland/".concat(i)+a+".png"}return this.__imgRoot2+"".concat(i,"/")+t.ID+".png"},getType:function(t){var e="";return 15===t.SubType?e=0===t.DetailType?"普通坐骑":"奇趣坐骑":23===t.SubType&&(e=0===t.DetailType?"头饰":1===t.DetailType?"鞍饰":2===t.DetailType?"足饰":3===t.DetailType?"马饰":"马具"),e}}},c=s,u=(i("68f4"),i("2877")),l=Object(u["a"])(c,n,r,!1,null,null,null);e["a"]=l.exports},"3ec0":function(t,e,i){},"51eb":function(t,e,i){"use strict";var n=i("825a"),r=i("485a"),a=TypeError;t.exports=function(t){if(n(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw new a("Incorrect hint");return r(this,t)}},5530:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("a4d3"),i("4de4"),i("14d9"),i("e439"),i("dbb4"),i("b64b"),i("d3b7"),i("159b");var n=i("ade3");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}},"5f92":function(t,e,i){},"68f4":function(t,e,i){"use strict";i("3ec0")},8172:function(t,e,i){"use strict";var n=i("e065"),r=i("57b9");n("toPrimitive"),r()},abab:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{ref:"component",staticClass:"c-map"},[e("div",{ref:"wrapper",staticClass:"u-map__wrapper",style:t.wrapperSize},[e("div",{staticClass:"u-map__inner",style:t.innerStyle},[e("img",{staticClass:"u-map-img",attrs:{refs:"img",src:t.mapImg,draggable:"false"}}),t.overview?e("div",{staticClass:"u-map-title__wrapper"},[t._t("title",(function(){return[e("div",{staticClass:"u-map-title"},[t._v(t._s(t.mapName))])]}),{title:t.mapName})],2):t._e(),t._l(t.datas,(function(i,n){return[e("div",{key:n,staticClass:"u-map-point__wrapper",style:t.pointStyle(i),attrs:{"data-index":n}},[t._t("point",(function(){return[e("el-popover",{attrs:{"popper-class":"u-map-point__popover",placement:"top",width:"200",trigger:"hover"}},[t._t("popover",(function(){return[e("div",[t.overview?t._e():e("div",{staticClass:"u-map-title"},[t._v(t._s(t.mapName))]),e("div",[t._v(t._s(i.title))]),e("div",{domProps:{innerHTML:t._s(i.content)}})])]}),{data:i}),e("span",{staticClass:"u-map-point",attrs:{slot:"reference"},slot:"reference"})],2)]}),{data:i})],2)]}))],2)])])},r=[],a=i("5530"),o=(i("99af"),i("7db0"),i("d81d"),i("a9e3"),i("b64b"),i("d3b7"),i("65c2"));const{__imgPath:s}=o,c=()=>fetch(s+"/map/data/map_scales.json").then(t=>t.json());var u={name:"Jx3boxMap",props:{mapId:{type:Number,default:1},datas:{type:Array,default:function(){return[]}},overview:{type:Boolean,default:!0},focus:{type:Number,default:void 0},trimBorder:{type:Boolean,default:!1},mapDraggable:{type:Boolean,default:!1},pointDraggable:{type:Boolean,default:!1},mapFollow:{type:Boolean,default:!0}},data:function(){return{outerWidth:0,outerHeight:0,innerLeft:0,innerBottom:0,mapScales:{}}},computed:{innerWidth:function(){return this.overview?this.outerWidth:1024},innerHeight:function(){return this.overview?this.outerHeight:896},wrapperSize:function(){return{width:this.outerWidth+"px",height:this.outerHeight+"px"}},focusPoint:function(){return void 0!=this.focus?this.datas[this.focus]:null!==(t=this.datas.find((function(t){return t.focus})))&&void 0!==t?t:this.datas[0];var t},innerStyle:function(){var t={width:this.innerWidth+"px",height:this.innerHeight+"px"};if(this.overview)return t;var e=this.offsetLimit(this.innerLeft,this.innerBottom),i=e.left,n=e.bottom;return Object(a["a"])(Object(a["a"])({},t),{},{left:i+"px",bottom:n+"px"})},subId:function(){var t=this.mapScales[this.mapId];if(!t||Object.keys(t)<=1)return 0;var e=0,i=0;for(var n in t){var r={x:t[n].StartX,y:t[n].StartY,width:t[n].Width/t[n].Scale,height:t[n].Height/t[n].Scale};this.isPointsInRect(r)&&t[n].Scale>i&&(e=n,i=t[n].Scale)}return e},mapName:function(){var t,e;return null===(t=this.mapScales[this.mapId])||void 0===t||null===(e=t[this.subId])||void 0===e?void 0:e.Name},mapScale:function(){var t;return null===(t=this.mapScales[this.mapId])||void 0===t?void 0:t[this.subId]},mapImg:function(){return"".concat(o.__imgPath,"map/maps/map_").concat(this.mapId,"_").concat(this.subId,".png")}},mounted:function(){this.fetchMapScales(),this.$nextTick((function(){this.bindUpdateSizeListener(),this.bindDraggerListener()}))},beforeDestroy:function(){window.removeEventListener("resize",this.updateSize)},methods:{pointPosition:function(t){var e=this.mapScale;if(!e)return{left:0,bottom:0};var i=e.Width/e.Scale,n=e.Height/e.Scale,r=(t.x-e.StartX)/i*this.innerWidth,a=(t.y-e.StartY)/n*this.innerHeight;return{left:r,bottom:a}},gamePosition:function(t,e){var i=this.mapScale;if(!i)return{x:0,y:0};var n=i.Width/i.Scale,r=i.Height/i.Scale,a=t/this.innerWidth*n+i.StartX,o=e/this.innerHeight*r+i.StartY;return{x:a,y:o}},pointStyle:function(t){var e=this.pointPosition(t),i=e.left,n=e.bottom;return{left:i+"px",bottom:n+"px"}},isPointsInRect:function(t){var e=this.datas.map((function(t){return{x:t.x,y:t.y}}));return e.every((function(e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}))},initInnerOffset:function(t){if(this.overview)return{x:0,y:0};var e={x:this.outerWidth/2,y:this.outerHeight/2},i=this.pointPosition(t);this.innerLeft=e.x-i.left,this.innerBottom=e.y-i.bottom},fetchMapScales:function(){var t=this;c().then((function(e){t.mapScales=e,t.initInnerOffset(t.focusPoint)}))},updateSize:function(){var t;if(this.outerWidth=null===(t=this.$refs["component"])||void 0===t?void 0:t.clientWidth,this.outerWidth){var e;if(this.overview)this.outerHeight=this.outerWidth/(1024/896);else this.outerHeight=null===(e=this.$refs["component"])||void 0===e?void 0:e.clientHeight;this.$emit("resize",[this.outerWidth,this.outerHeight])}},bindUpdateSizeListener:function(){var t=this.$refs["component"];t&&(this.updateSize(),t.addEventListener("resize",this.updateSize))},bindDraggerListener:function(){var t=this;if(this.mapDraggable||this.pointDraggable){var e=this.$refs["wrapper"];if(e){var i={},n=function(t){var e=t.target;while(!e.classList.contains("u-map__wrapper")){if(e.classList.contains("u-map-point__wrapper"))return i.pointIndex=Number(e.dataset["index"]),!0;e=e.parentNode}return!1},r=function(e){var n=e.clientX,r=e.clientY;i.dx=n-i.x,i.dy=i.y-r;var a=t.offsetLimit(i.px+i.dx,i.py+i.dy),o=a.left,s=a.bottom;t.innerLeft=o,t.innerBottom=s},a=function(e){var n=e.clientX,r=e.clientY,a=t.datas[i.pointIndex],o=t.mapScale;i.dx=(n-i.x)/o.Scale,i.dy=(i.y-r)/o.Scale;var s=t.positionLimit(i.px+i.dx,i.py+i.dy),c=s.x,u=s.y;a.x=c,a.y=u},o=function(e){i={};var o=e.clientX,c=e.clientY;if(i.x=o,i.y=c,n(e)){if(!t.pointDraggable)return;i.point=t.datas[i.pointIndex],i.type="point-move",i.px=i.point.x,i.py=i.point.y,document.addEventListener("mousemove",a),document.addEventListener("mouseup",s)}else{if(!t.mapDraggable)return;i.type="map-move",i.px=t.innerLeft,i.py=t.innerBottom,document.addEventListener("mousemove",r),document.addEventListener("mouseup",s)}},s=function e(){document.removeEventListener("mousemove",r),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e),(i.dx||i.dy)&&(t.$emit(i.type,i),t.mapFollow&&"point-move"==i.type&&t.initInnerOffset(i.point))};e.addEventListener("mousedown",o)}}},offsetLimit:function(t,e){var i=0,n=this.outerWidth-this.innerWidth,r=0,a=this.outerHeight-this.innerHeight;return{left:Math.max(Math.min(t,i),n),bottom:Math.max(Math.min(e,r),a)}},positionLimit:function(t,e){var i=this.mapScale.StartX,n=this.mapScale.StartX+this.mapScale.Width/this.mapScale.Scale-1024,r=this.mapScale.StartY,a=this.mapScale.StartY+this.mapScale.Height/this.mapScale.Scale-1024;return{x:Math.max(Math.min(t,n),i),y:Math.max(Math.min(e,a),r)}}}},l=u,m=(i("c2ba"),i("2877")),p=Object(m["a"])(l,n,r,!1,null,"17f22fc4",null);e["a"]=p.exports},ade3:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("53ca");i("a4d3"),i("e01a"),i("8172"),i("d9e2"),i("efec"),i("a9e3"),i("d3b7");function r(t,e){if("object"!=Object(n["a"])(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=Object(n["a"])(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t){var e=r(t,"string");return"symbol"==Object(n["a"])(e)?e:String(e)}function o(t,e,i){return e=a(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},bf15:function(t,e,i){"use strict";i("99af");var n=function(){var t=this,e=t._self._c;return e("el-popover",{staticClass:"u-item",attrs:{placement:"right-start",trigger:"hover","visible-arrow":!1,"popper-class":"u-item__popup"}},[e("template",{slot:"reference"},[e("div",{staticClass:"u-item__warpper",class:{background:!t.onlyIcon,is_vertical:t.vertical}},[t.onlyName?t._e():e("a",{staticClass:"u-item-icon",style:"height:".concat(t.size,"px; width:").concat(t.size,"px"),attrs:{target:"_blank",href:t.isLink?t.getLink("item",t.source.id):t.noLink()}},[e("img",{staticClass:"u-item-icon__img",style:{height:t.size+"px",width:t.size+"px",cursor:t.isLink?"pointer":"default"},attrs:{src:t.iconLink(t.source.IconID,t.client)}}),e("div",{staticClass:"u-item-icon__quality",style:{backgroundImage:t.item_border(t.source),opacity:5==t.source.Quality?.9:1}}),e("div",{staticClass:"u-item-icon__quest",style:{backgroundImage:t.item_border_quest(t.source)}}),1!==t.display_amount?e("span",{staticClass:"u-item-icon__count"},[t._v(t._s(t.display_amount))]):t._e()]),t.onlyIcon?t._e():e("div",{staticClass:"u-item-name",class:"e-jx3-item__q".concat(t.source.Quality)},[t._v(" "+t._s(t.source.Name)+" ")])])]),e("jx3-item",{attrs:{item:t.source}})],2)},r=[],a=(i("e9c4"),i("a9e3"),i("b64b"),i("c7fa")),o=i("4ae4"),s=i("85e4"),c=i("65c2"),u={name:"ItemIcon",data:function(){return{source:{},real_id:null,maybeBook:!1}},components:{"jx3-item":a["a"]},props:{size:{type:Number,default:28},item_id:{type:String,default:null},amount:{type:Number,default:1},onlyName:{type:Boolean,default:!1},onlyIcon:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},isLink:{type:Boolean,default:!0}},methods:{noLink:function(){return!1},get_data:function(t){var e=this;t&&Object(o["a"])(t,this.client).then((function(t){var i=t.data;Object.keys(i).length&&(e.source=i,sessionStorage.setItem(e.cache_key,JSON.stringify(i)))})).catch((function(t){var i;400==(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.code)&&!1===e.maybeBook&&(e.maybeBook=!0,e.real_id="".concat(e.item_id,"_").concat(e.amount))}))},iconLink:s["iconLink"],getLink:s["getLink"],item_border_quest:function(t){return t.IsQuest>0?"url(".concat(c["__imgPath"],"image/item/renwu.png)"):""},item_border:function(t){switch(t.Quality){case 3:return"url(".concat(c["__imgPath"],"image/item/blue.png)");case 4:return"url(".concat(c["__imgPath"],"image/item/purple.png)");case 5:return"url(".concat(c["__imgPath"],"image/item/orange.gif)");default:return""}}},computed:{client:function(){return this.$store.state.client},cache_key:function(){return"item-".concat(this.client,"-").concat(this.real_id)},display_amount:function(){return!1===this.maybeBook?this.amount:1}},watch:{real_id:{immediate:!0,handler:function(){var t=sessionStorage.getItem(this.cache_key);if(t)try{this.source=JSON.parse(t)}catch(e){console.log(e,"[Item]无法解析本地缓存"),this.get_data(this.real_id)}else this.get_data(this.real_id)}},item_id:{immediate:!0,handler:function(){this.real_id=this.item_id}}}},l=u,m=(i("23d0"),i("2877")),p=Object(m["a"])(l,n,r,!1,null,null,null);e["a"]=p.exports},c2ba:function(t,e,i){"use strict";i("03a6")},d47d:function(t,e,i){t.exports=i.p+"img/horse_item_bg_sm.1dd5cf95.jpg"},dbb4:function(t,e,i){"use strict";var n=i("23e7"),r=i("83ab"),a=i("56ef"),o=i("fc6a"),s=i("06cf"),c=i("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,i,n=o(t),r=s.f,u=a(n),l={},m=0;while(u.length>m)i=r(n,e=u[m++]),void 0!==i&&c(l,e,i);return l}})},e439:function(t,e,i){"use strict";var n=i("23e7"),r=i("d039"),a=i("fc6a"),o=i("06cf").f,s=i("83ab"),c=!s||r((function(){o(1)}));n({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(a(t),e)}})},ed08:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return a}));i("caad"),i("d3b7"),i("ac1f"),i("25f0"),i("2532"),i("466d");function n(t){if("[object Object]"===Object.prototype.toString.call(t)){for(var e in t)[void 0,null,""].includes(t[e])&&delete t[e];return t}return t}function r(){var t=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return null!==t}function a(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}},ef56:function(t){t.exports=JSON.parse('{"13":{"mapName":"金水镇","horses":["龙子","麟驹"],"coordinates":[{"x":51547,"y":17586,"z":1056512}]},"21":{"mapName":"巴陵县","horses":["龙子","麟驹"],"coordinates":[{"x":59030,"y":46042,"z":1056448}]},"22":{"mapName":"南屏山","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":87058,"y":61930,"z":1116416}]},"23":{"mapName":"龙门荒漠","horses":["龙子","麟驹"],"coordinates":[{"x":36139,"y":62593,"z":1065728}]},"30":{"mapName":"昆仑","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":36263,"y":72466,"z":1073792}]},"74":{"mapName":"帮会领地","coordinates":[{"x":17193,"y":25286,"z":1100032}]},"100":{"mapName":"白龙口","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":39766,"y":99090,"z":1120704}]},"101":{"mapName":"无量山","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":78670,"y":112690,"z":1054784}]},"104":{"mapName":"黑龙沼","horses":["里飞沙·踏秋"],"coordinates":[{"x":82823,"y":102579,"z":1054400}]},"105":{"mapName":"苍山洱海","coordinates":[{"x":21128,"y":13890,"z":1140800}]},"216":{"mapName":"阴山大草原","horses":[["龙子·踏莎","麟驹·踏莎"],["绝尘·踏莎","赤蛇·踏莎","闪电·踏莎"],["里飞沙·踏秋"],["赤兔·飞虹"]],"coordinates":[{"x":87078,"y":40830,"z":1089088}]},"217":{"mapName":"黑戈壁","horses":[["龙子·燕歌","麟驹·燕歌"],["绝尘·燕歌","赤蛇·燕歌","闪电·燕歌"],["里飞沙·踏秋"],["赤兔·飞虹"]],"coordinates":[{"x":91514,"y":61046,"z":1077056}]},"411":{"mapName":"鲲鹏岛","horses":[["龙子·潮生","麟驹·潮生"],["绝尘·潮生","赤蛇·潮生","闪电·潮生"],["里飞沙·踏秋"],["赤兔·飞虹"]],"coordinates":[{"x":82174,"y":102429,"z":1092224}]}}')},efec:function(t,e,i){"use strict";var n=i("1a2d"),r=i("cb2d"),a=i("51eb"),o=i("b622"),s=o("toPrimitive"),c=Date.prototype;n(c,s)||r(c,s,a)},f252:function(t,e,i){"use strict";i.d(e,"b",(function(){return l})),i.d(e,"f",(function(){return a})),i.d(e,"e",(function(){return o})),i.d(e,"a",(function(){return s})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return u})),i.d(e,"g",(function(){return m}));var n=i("41cb"),r=Object(n["d"])();function a(t){return r.get("/horses",{params:t})}function o(t){return r.get("/horse",{params:t})}function s(t){return r.get("/horse/attrs",{params:t})}function c(t){return r.get("/horse/feeds",{params:t})}function u(t){return Object(n["c"])().get("/api/game/reporter/horse",{params:t})}function l(t){var e={pageIndex:1,pageSize:50,server:t,type:"chitu-horse",subtype:"share_msg"};return Object(n["c"])().get("/api/game/reporter/horse",{params:e})}function m(){return Object(n["a"])().get("/api/cms/user/my/info")}}}]);
//# sourceMappingURL=chunk-0126ac54.49287e60.js.map