(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-de07c33e"],{"20b2":function(t,e,a){},3675:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"k",(function(){return l})),a.d(e,"b",(function(){return u})),a.d(e,"g",(function(){return d})),a.d(e,"h",(function(){return m})),a.d(e,"j",(function(){return c})),a.d(e,"d",(function(){return f})),a.d(e,"f",(function(){return r})),a.d(e,"e",(function(){return p})),a.d(e,"i",(function(){return h}));var i=a("41cb");function n(t){var e=t.year,a=t.month,i=t.date,n="";return e&&(n+="/".concat(e)),a&&(n+="/".concat(a)),i&&(n+="/".concat(i)),n}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"std",a=n(t);return Object(i["a"])().get("/api/cms/calendar/archive"+a,{params:{client:e}})}function r(t){var e=n(t);return Object(i["a"])().get("/api/cms/calendar/archive"+e)}function o(t){var e=n(t);return Object(i["a"])().post("/api/cms/calendar/archive"+e,t)}function l(t,e){return Object(i["a"])().put("/api/cms/calendar/".concat(t),e)}function c(t,e){return Object(i["a"])().put("/api/cms/calendar/".concat(t,"/manage"),e)}function u(t){return Object(i["a"])().delete("/api/cms/calendar/".concat(t))}function d(t){return Object(i["a"])().get("/api/cms/calendar/".concat(t))}function m(t,e){var a=n(t);return Object(i["a"])().get("/api/cms/calendar/history".concat(a),{params:e})}function f(t){var e=n(t);return Object(i["a"])().get("/api/cms/calendar/count".concat(e))}function p(t){var e=n(t);return Object(i["a"])().get("/api/cms/calendar/slogan".concat(e))}function h(t){return Object(i["a"])().get("/api/cms/team/raids/my-join",{params:t})}},3887:function(t,e,a){"use strict";a("9911");var i=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.value,"append-to-body":""},on:{close:t.cancel},scopedSlots:t._u([{key:"title",fn:function(){return[e("header",[t._v(t._s(t.title))])]},proxy:!0},{key:"footer",fn:function(){return[e("el-button",{attrs:{size:"medium"},on:{click:t.cancel}},[t._v(t._s(t.$t("取消")))]),e("el-button",{attrs:{type:"primary",size:"medium",loading:t.loading},on:{click:t.confirm}},[t._v(t._s(t.$t("确认")))])]},proxy:!0}])},[e("main",{staticClass:"u-form"},[e("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[e("el-form-item",{attrs:{label:t.$t("日期"),required:"",error:t.dateError}},[e("div",{staticClass:"m-date"},[e("el-input-number",{staticClass:"u-date",attrs:{placeholder:t.$t("请输入年份"),min:2009,max:t.maxYear,size:"medium"},model:{value:t.form.year,callback:function(e){t.$set(t.form,"year",t._n(e))},expression:"form.year"}}),e("el-input-number",{staticClass:"u-date",attrs:{placeholder:t.$t("请输入月份"),min:1,max:12,size:"medium"},model:{value:t.form.month,callback:function(e){t.$set(t.form,"month",t._n(e))},expression:"form.month"}}),e("el-input-number",{staticClass:"u-date",attrs:{placeholder:t.$t("请输入日期"),min:1,max:31,size:"medium"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",t._n(e))},expression:"form.date"}})],1)]),e("el-form-item",{attrs:{label:t.$t("类型"),required:""}},[e("div",{staticClass:"m-type"},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",t._n(e))},expression:"form.type"}},[e("el-radio-button",{attrs:{label:1}},[t._v(t._s(t.$t("事件")))]),e("el-radio-button",{attrs:{label:2}},[t._v(t._s(t.$t("活动")))])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:2===t.form.type,expression:"form.type === 2"}],staticClass:"m-type-icon"},[e("el-input",{attrs:{size:"small",placeholder:t.$t("图标ID"),minlength:1,maxlength:10,max:3e4,min:0},model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",t._n(e))},expression:"form.icon"}},[e("template",{slot:"prepend"},[e("img",{staticClass:"u-icon",attrs:{src:t.iconLink(t.form.icon)}})])],2)],1)],1)]),e("el-form-item",{attrs:{label:t.$t("描述"),required:"",error:t.descError}},[e("el-input",{attrs:{type:"textarea",rows:8,placeholder:t.$t("输入事件描述")},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),e("el-form-item",{attrs:{label:t.$t("客户端"),required:""}},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.form.client,callback:function(e){t.$set(t.form,"client",e)},expression:"form.client"}},[e("el-radio-button",{attrs:{label:"std"}},[t._v(t._s(t.$t("正式服")))]),e("el-radio-button",{attrs:{label:"origin"}},[t._v(t._s(t.$t("怀旧服")))]),1==t.form.type?e("el-radio-button",{attrs:{label:"all"}},[t._v(t._s(t.$t("双端")))]):t._e()],1)],1),e("el-form-item",{attrs:{label:t.$t("参考资料")}},[t._l(t.form.link,(function(a,i){return[e("div",{key:a.id||i,staticClass:"m-links"},[e("el-input",{staticClass:"u-link-item",attrs:{placeholder:t.$t("请输入标题")},model:{value:a.label,callback:function(e){t.$set(a,"label",e)},expression:"item.label"}}),e("el-input",{staticClass:"u-link-item",attrs:{placeholder:t.$t("请输入链接")},model:{value:a.url,callback:function(e){t.$set(a,"url",e)},expression:"item.url"}}),e("el-button",{staticClass:"u-del-icon",attrs:{type:"text",icon:"el-icon-circle-close",title:t.$t("删除参考资料")},on:{click:function(e){return t.removeLink(i)}}})],1)]})),e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:t.addDisabled},on:{click:t.addLink}},[t._v(t._s(t.$t("添加")))])],2),t.isEditor&&t.isEditmode?[e("el-divider",[e("i",{staticClass:"el-icon-coordinate"}),t._v(" "+t._s(t.$t("管理设置")))]),e("el-form-item",{attrs:{label:t.$t("格子显示")}},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.form.is_top,callback:function(e){t.$set(t.form,"is_top",t._n(e))},expression:"form.is_top"}},[e("el-radio-button",{attrs:{label:0}},[t._v(t._s(t.$t("否")))]),e("el-radio-button",{attrs:{label:1}},[t._v(t._s(t.$t("是")))])],1)],1),t.form.is_top?e("el-form-item",{attrs:{label:t.$t("格子简述")}},[e("el-input",{attrs:{type:"input",placeholder:t.$t("输入简述（非必填）")},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1):t._e(),e("el-form-item",{attrs:{label:t.$t("重要级别")}},[e("el-input-number",{attrs:{size:"medium",min:0,max:5},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",t._n(e))},expression:"form.level"}})],1),e("el-form-item",{attrs:{label:t.$t("样式")}},[e("div",{staticClass:"m-style"},[e("div",{staticClass:"m-color-item"},[e("label",{staticClass:"u-label"},[t._v(t._s(t.$t("背景色")))]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.form.bgcolor,expression:"form.bgcolor"}],staticClass:"u-color-value"},[t._v("【"+t._s(t.form.bgcolor)+"】")]),e("el-color-picker",{attrs:{size:"small",predefine:t.predefineColors},model:{value:t.form.bgcolor,callback:function(e){t.$set(t.form,"bgcolor",e)},expression:"form.bgcolor"}})],1),e("div",{staticClass:"m-color-item"},[e("label",{staticClass:"u-label"},[t._v(t._s(t.$t("颜色")))]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.form.color,expression:"form.color"}],staticClass:"u-color-value"},[t._v("【"+t._s(t.form.color)+"】")]),e("el-color-picker",{attrs:{size:"small",predefine:t.predefineColors},model:{value:t.form.color,callback:function(e){t.$set(t.form,"color",e)},expression:"form.color"}})],1)])]),e("el-form-item",{attrs:{label:t.$t("图片")}},[e("img-upload",{attrs:{data:t.form.img,filed:"img"},on:{update:t.setMeta}})],1),e("el-form-item",{attrs:{label:t.$t("备注")}},[e("el-input",{attrs:{size:"medium",placeholder:t.$t("请输入备注")},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),e("el-form-item",{attrs:{label:t.$t("操作")}},[e("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small",type:"warning"},on:{click:t.recheck}},[t._v(t._s(t.$t("复审")))]),e("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger"},on:{click:t.del}},[t._v(t._s(t.$t("删除")))])],1)]:t._e()],2)],1)])},n=[],s=a("5530"),r=(a("caad"),a("14d9"),a("a434"),a("d3b7"),a("2532"),a("3675")),o=a("c9d2"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-publish-banner"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.url,"show-file-list":!1,"on-success":t.done,"on-error":t.fail,"with-credentials":"",accept:"image/jpg,image/jpeg,image/gif,image/png,image/bmp"}},[t.banner?e("img",{attrs:{src:t._f("showBanner")(t.banner)}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("el-button",{staticClass:"u-remove",attrs:{type:"info",size:"mini",icon:"el-icon-circle-close"},on:{click:t.clearBanner}},[t._v(t._s(t.$t("移除图片")))])],1)},c=[],u=(a("99af"),a("b64b"),a("65c2")),d=a("85e4"),m=u["__cms"],f=m+"api/cms/upload",p={name:"post_banner",props:["filed","data"],data:function(){return{banner:this.data,url:f}},model:{prop:"data",event:"update"},watch:{data:function(t){this.banner=t},banner:function(t){this.$emit("update",{key:this.filed,val:t})}},methods:{done:function(t,e){this.banner=(null===t||void 0===t?void 0:t.data[0])||""},fail:function(t,e,a){try{var i=JSON.parse(t.message);this.$message.error("[".concat(i.code,"]").concat(i.msg))}catch(n){this.$message.error("网络请求异常")}},clearBanner:function(){this.banner=""}},filters:{showBanner:d["showBanner"]}},h=p,b=(a("f470"),a("2877")),v=Object(b["a"])(h,l,c,!1,null,null,null),_=v.exports,g=a("b288"),$={year:2022,month:3,date:16,type:1,desc:"",client:location.href.includes("origin")?"origin":"std",link:[],is_top:0,level:0,remark:"",banner:"",bgcolor:"",color:"",img:"",style:"",icon:0},k={name:"calendar_dialog",components:{"img-upload":_},props:["value","dateObj","selected","mode","isSuper"],data:function(){return{form:Object(s["a"])({},Object.assign({},$,this.dateObj)),dateError:"",descError:"",loading:!1,predefineColors:g}},computed:{isEditmode:function(){return"update"==this.mode},title:function(){return this.isEditmode?"编辑":"新增"},maxYear:function(){return(new Date).getFullYear()+1},addDisabled:function(){var t,e;return(null===(t=this.form)||void 0===t||null===(e=t.link)||void 0===e?void 0:e.length)>=10},isEditor:function(){return o["a"].isEditor()}},watch:{selected:{deep:!0,immediate:!0,handler:function(t){t?(this.form=t,this.form.link||(this.form.link=[],this.form.link.push({label:"官网新闻",url:t.link_temp}))):this.form=Object.assign({},$,this.dateObj)}},dateObj:{deep:!0,handler:function(t){t&&(this.form=Object(s["a"])(Object(s["a"])({},this.form),t||{}))}}},methods:{addLink:function(){var t,e;null===(t=this.form)||void 0===t||null===(e=t.link)||void 0===e||e.push({url:"",label:"",id:+new Date})},removeLink:function(t){var e,a;null===(e=this.form)||void 0===e||null===(a=e.link)||void 0===a||a.splice(t,1)},validate:function(){if(this.form){var t=this.form,e=t.year,a=t.month,i=t.date,n=t.desc;e?(this.dateError="",this.dateError=a?i?"":"请输入日期":"请输入月份"):this.dateError="请输入年份",this.descError=n?"":"请输入事件描述"}},reset:function(){this.$emit("input",!1),this.form=Object.assign({},$,this.dateObj),this.dateError="",this.descError=""},cancel:function(){this.$emit("input",!1)},confirm:function(){var t=this;if(this.validate(),!this.descError&&!this.dateError){this.loading=!0;var e=this.isEditmode?this.put:this.post;e().then((function(){t.reset()})).finally((function(){t.loading=!1}))}},post:function(){var t=this;return Object(r["a"])(this.form).then((function(e){t.$notify({title:"提交成功",message:"请耐心等待审核",type:"success"}),t.$emit("update",e),t.reset()}))},put:function(){var t=this,e=this.isSuper?r["j"]:r["k"];return e(this.selected.id,this.form).then((function(e){t.$emit("update"),t.reset()})).then((function(){t.isSuper?t.$notify({title:"操作成功",message:"日历记录更新成功",type:"success"}):t.$notify({title:"提交成功",message:"请等待重新审核",type:"success"})}))},del:function(){var t=this;Object(r["b"])(this.selected.id).then((function(){t.$emit("del",t.selected.id),t.$notify({type:"success",title:"删除成功",message:"日历记录已删除"})}))},recheck:function(){var t=this;Object(r["j"])(this.selected.id,{status:0}).then((function(){t.$notify({type:"success",title:"操作成功",message:"日历记录已设为待审核"}),t.$emit("del",t.selected.id)}))},setMeta:function(t){var e=t.key,a=t.val;this.form[e]=a},iconLink:d["iconLink"]}},y=k,C=(a("4ad2"),Object(b["a"])(y,i,n,!1,null,null,null));e["a"]=C.exports},"4ad2":function(t,e,a){"use strict";a("f69d")},5433:function(t,e,a){},"7d54":function(t,e,a){"use strict";a("5433")},8583:function(t,e,a){"use strict";a("fb6a");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-calendar-detail-item",on:{click:function(e){return t.view(t.data)}}},[e("div",{staticClass:"u-primary"},[2==t.data.type?e("img",{staticClass:"u-icon",attrs:{src:t.iconLink(t.data.icon)}}):e("a",{staticClass:"u-author",attrs:{target:"_blank",href:t.authorLink(t.data.user_id),title:"由".concat(t.data.user_info.display_name,"贡献")},on:{click:function(t){t.stopPropagation()}}},[t.data&&t.data.user_info?e("img",{staticClass:"u-avatar",attrs:{src:t.showAvatar(t.data.user_info.user_avatar),alt:t.data.user_info.display_name}}):t._e()]),e("span",{staticClass:"u-desc"},[1==t.data.type?e("i",{staticClass:"u-client",class:t.data.client},[t._v(t._s(t.getClientLabel(t.data.client).slice(0,1)))]):t._e(),t.data.is_top?e("i",{staticClass:"u-star"},[t._v("⭐️")]):t._e(),e("span",{style:t.descStyle(t.data)},[t._v(t._s(t.data.desc))])])]),e("div",{staticClass:"u-actions"},[e("span",{staticClass:"u-action u-comment"},[e("i",{staticClass:"u-comment-icon el-icon-chat-dot-round"}),e("span",{staticClass:"u-comment-count"},[t._v(t._s(t.$t("评论"))),e("em",{staticClass:"u-count"},[t._v("("+t._s(t.data.comments_count||0)+")")])])]),e("span",{staticClass:"u-action u-reference"},[e("i",{staticClass:"u-reference-icon el-icon-connection"}),e("span",{staticClass:"u-reference-count"},[t._v(t._s(t.$t("参考资料"))),e("span",{staticClass:"u-count"},[t._v("("+t._s(t.getRefCount(t.data))+")")])])]),t.isEditor?e("span",{staticClass:"u-action u-edit",on:{click:function(e){return e.stopPropagation(),t.edit(t.data)}}},[e("i",{staticClass:"el-icon-edit-outline"}),e("span",{staticClass:"u-edit-text"},[t._v(t._s(t.$t("编辑")))])]):t._e()])])},n=[],s=(a("14d9"),a("9911"),a("85e4")),r=a("c9d2"),o=a("65c2"),l={name:"CalendarDetailItem",props:["type","data"],components:{},data:function(){return{}},computed:{isEditor:function(){return r["a"].isEditor()}},watch:{},methods:{view:function(t){-1===t.desc.indexOf("(待审核)")?this.$router.push("/gonggao/single/".concat(t.id)):this.$message({type:"info",message:"等待审核中..."})},edit:function(t){this.$emit("edit",t)},authorLink:s["authorLink"],iconLink:s["iconLink"],showAvatar:s["showAvatar"],descStyle:function(t){var e=t.color;return e?{color:e,fontWeight:"bold"}:{}},getRefCount:function(t){var e;return null!==(e=t.link)&&void 0!==e&&e.length?t.link.length:t.link_temp?1:0},getClientLabel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"std";return o["__clients"][t]}}},c=l,u=(a("7d54"),a("2877")),d=Object(u["a"])(c,i,n,!1,null,null,null);e["a"]=d.exports},b288:function(t){t.exports=JSON.parse('["#ffffff","#ff3399","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#9933ff"]')},f470:function(t,e,a){"use strict";a("20b2")},f69d:function(t,e,a){}}]);
//# sourceMappingURL=chunk-de07c33e.5961b598.js.map