(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1424144a"],{"015b":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"wrap",staticClass:"cross-wrapper",class:"m-".concat(t.type)},[t.isShow?[e("div",{staticClass:"cross cross-left",class:!t.isInLeft&&"active",style:{width:t.width+"px","border-top-left-radius":t.radius+"px","border-bottom-left-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toLeft.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-left"})]),e("div",{staticClass:"cross cross-right",class:!t.isInRight&&"active",style:{width:t.width+"px","border-top-right-radius":t.radius+"px","border-bottom-right-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toRight.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-right"})])]:t._e(),e("div",{ref:"list",staticClass:"list"},t._l(t.list,(function(i,a){return e("div",{key:i.id||i.ID+i.ItemID||a,staticClass:"item",style:{"margin-right":t.gap+"px"}},[t._t("default",null,{item:i})],2)})),0)],2)},s=[],n=(i("a9e3"),{name:"Cross",props:{list:{type:Array,required:!0},width:{type:Number,default:60},gap:{type:Number,default:20},radius:{type:Number,default:10},offset:{type:Object,default:function(){return{top:0,left:0,right:0,bottom:0}}},type:{type:String,default:"rare"},arrow:{type:Number,default:1}},data:function(){return{scrollLeft:0,isInLeft:!0,isInRight:!1,isShow:!1}},methods:{toLeft:function(t){t.preventDefault(),this.isInRight=!1,this.scroll(-this.arrow)},toRight:function(t){t.preventDefault(),this.isInLeft=!1,this.scroll(this.arrow)},scroll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.$refs.list,a=i.scrollLeft,s=i.scrollWidth,n=i.clientWidth,o=n/2*e,r=null;r=setInterval((function(){e===t.arrow?(i.scrollLeft<a+o?i.scrollLeft+=Math.ceil(o/100):clearInterval(r),Math.ceil(i.scrollLeft+n)>=s&&(t.isInRight=!0,clearInterval(r))):e===-t.arrow&&(i.scrollLeft>a+o?i.scrollLeft+=Math.floor(o/100):clearInterval(r),i.scrollLeft<=0&&(t.isInLeft=!0,clearInterval(r)))}),1)}},mounted:function(){var t=this;this.$nextTick((function(){var e=t.$refs.list,i=e.clientWidth,a=e.scrollWidth;a>i&&(t.isShow=!0)}))}}),o=n,r=(i("685d"),i("2877")),l=Object(r["a"])(o,a,s,!1,null,null,null);e["a"]=l.exports},"1e8d":function(t,e,i){},"33d3":function(t,e,i){"use strict";i("ee6b")},"444c":function(t,e,i){"use strict";i("9856")},"4c2b":function(t,e,i){},"685d":function(t,e,i){"use strict";i("4c2b")},"76f1":function(t,e,i){},"81d5":function(t,e,i){"use strict";var a=i("7b0b"),s=i("23cb"),n=i("07fa");t.exports=function(t){var e=a(this),i=n(e),o=arguments.length,r=s(o>1?arguments[1]:void 0,i),l=o>2?arguments[2]:void 0,c=void 0===l?i:s(l,i);while(c>r)e[r++]=t;return e}},8404:function(t,e,i){"use strict";i("76f1")},9856:function(t,e,i){},a01c:function(t,e,i){},a790:function(t,e,i){"use strict";var a=i("ade3"),s=(i("cb29"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-common-list--v2"},[t._t("default"),e("div",{staticClass:"m-replace",style:{height:t.height+"px"},on:{mouseover:function(e){return t.changeColor(t.color)},mouseout:function(e){return t.changeColor("#E1E1E1")},click:t.update}},[e("svg",{attrs:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({width:"48",height:"71",viewBox:"0 0 48 71",fill:"none",xmlns:"http://www.w3.org/2000/svg","svg-inline":""},"fill",t.fill),"role","presentation"),"focusable","false"),"tabindex","-1")},[e("g",{attrs:{"clip-path":"url(#clip0_243_8913)"}},[e("path",{attrs:{d:"M6.497 20.137c-.017-2.112 2.245-3.312 3.965-2.344l.188.117 4.463 3.007c2.374 1.6.897 5.243-1.833 4.858l-.228-.042-.182-.04a12.507 12.507 0 0021.958.559 2.5 2.5 0 014.334 2.496c-3.862 6.7-11.865 10.254-19.692 8.155A17.505 17.505 0 016.497 20.137zm2.343-8.884C12.7 4.552 20.703 1 28.53 3.095a17.505 17.505 0 0112.973 16.767c.017 2.111-2.245 3.311-3.965 2.345l-.188-.117-4.463-3.008c-2.374-1.599-.897-5.242 1.831-4.857l.23.042.18.038a12.507 12.507 0 00-21.958-.555 2.5 2.5 0 11-4.33-2.497z"}})]),e("path",{attrs:{d:"M.313 63.79l-.126-2.25c.459-.11 1.032-.264 1.72-.462v-2.46H.358v-2h1.547v-2.782h1.938v2.781H5v1.469c1.406-1.599 2.38-3.078 2.922-4.438l2.281.266c-.187.375-.383.745-.586 1.11h4.461v1.703l-1.234 1.515h2v4.688h.89v1.765h-4.14c.786 1.13 2.161 1.89 4.125 2.282a77.307 77.307 0 00-1.219 2.125c-1.865-.594-3.25-1.641-4.156-3.141-.813 1.385-2.39 2.453-4.735 3.203a20.213 20.213 0 00-1.25-1.969c2.386-.479 3.857-1.312 4.414-2.5H4.438V62.93h1.28v-4.344c-.223-.161-.463-.32-.718-.477v.508H3.844v1.875l1.25-.39a28.774 28.774 0 00-.063 2.125l-1.187.39v4.61c0 .494-.097.88-.29 1.156a1.213 1.213 0 01-.82.508c-.349.062-1.015.106-2 .132a20.147 20.147 0 00-.468-2.062c.302.031.666.047 1.093.047.365 0 .547-.24.547-.719v-3.031l-1.593.531zm7.14-5.548h2.969l1.203-1.531H8.578a23.1 23.1 0 01-1.125 1.531zm3.75 4.688h1.719v-2.922h-1.688c0 1.416-.01 2.39-.03 2.922zm-1.945 0c.036-.323.055-1.297.055-2.922H7.64v2.922h1.617zm7.21-2.72h15.095v2.313H16.468v-2.312zm16.141 8.188l-.375-2.078c1.844-.208 3.756-.453 5.735-.734-.021.302-.037.604-.047.906h.812v-8.914a79.6 79.6 0 01-3.328 5.102l2.75-.328a23.5 23.5 0 00-.172 1.875c-2.677.28-4.265.51-4.765.687l-.766-1.875c.531-.302 1.333-1.26 2.406-2.875-1.01.052-1.692.136-2.047.25l-.624-1.828c.562-.354 1.526-2.02 2.89-5l1.984.766a90.12 90.12 0 01-2.468 4.125l1.367-.07c.344-.584.685-1.196 1.023-1.837l1.75.836v-3.054h8.047v12.14h.985v2.016H37.64v-.852l-5.032.742zm11.985-12.03h-3.672v2.046h3.672v-2.047zm-3.672 6.062h3.672v-2.047h-3.672v2.047zm0 4.062h3.672v-2.094h-3.672v2.094z"}}),e("defs",[e("clipPath",{attrs:{id:"clip0_243_8913"}},[e("path",{attrs:{transform:"translate(4)",d:"M0 0h40v40H0z"}})])])])])],2)}),n=[],o={name:"commonList",props:["data"],emits:["update:load"],data:function(){return{fill:"#E1E1E1",number:0}},computed:{color:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.color)||""},height:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.height)||0},type:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.type}},methods:{changeColor:function(t){this.fill=t},update:function(){this.$emit("update:load",this.type)}}},r=o,l=(i("f674"),i("2877")),c=Object(l["a"])(r,s,n,!1,null,null,null);e["a"]=c.exports},c740:function(t,e,i){"use strict";var a=i("23e7"),s=i("b727").findIndex,n=i("44d2"),o="findIndex",r=!0;o in[]&&Array(1)[o]((function(){r=!1})),a({target:"Array",proto:!0,forced:r},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(o)},cb29:function(t,e,i){"use strict";var a=i("23e7"),s=i("81d5"),n=i("44d2");a({target:"Array",proto:!0},{fill:s}),n("fill")},e5d7:function(t,e,i){"use strict";i("ac1f"),i("841c");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-common-toolbar"},[t._t("prefix"),t.types.length?e("div",{staticClass:"m-toolbar-item"},t._l(t.types,(function(i,a){return e("div",{key:a,staticClass:"u-item",style:t.style(i.value),on:{mouseover:function(e){return t.handleMouseOver(i.value)},mouseout:t.handleMouseOut,click:function(e){return t.changeType(i.value)}}},[t._v(" "+t._s(t.$t(i.label))+" ")])})),0):t._e(),t._t("prepend"),t.search?e("div",{staticClass:"m-toolbar-item m-toolbar-search"},[t._t("filter"),e("div",{staticClass:"u-search"},[e("el-input",{staticClass:"u-search-input",attrs:{placeholder:t.$t("请输入搜索内容"),"suffix-icon":"el-icon-search"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],2):t._e(),t._t("append")],2)},s=[],n=(i("a9e3"),{name:"toolbar",props:{types:{type:Array,default:function(){return[]}},search:{type:Boolean,default:!1},color:{type:String,default:"#6b52ff"},active:{type:[String,Number],default:null}},data:function(){return{type:null,hover:null,title:""}},computed:{params:function(){var t={type:this.type};return this.title&&(t.search=this.title),t}},methods:{changeType:function(t){this.type=t},handleMouseOver:function(t){this.hover=t},handleMouseOut:function(){this.hover=null},style:function(t){var e=this.hover===t||this.type===t,i=e?this.color:"#fff",a=e?"#fff":"#949494";return{backgroundColor:i,color:a}}},watch:{params:{deep:!0,handler:function(t){this.$emit("update",t)}},types:{immediate:!0,deep:!0,handler:function(t){t&&t.length&&(this.type=this.active||t[0].value)}}}}),o=n,r=(i("e791"),i("2877")),l=Object(r["a"])(o,a,s,!1,null,null,null);e["a"]=l.exports},e791:function(t,e,i){"use strict";i("1e8d")},ee6b:function(t,e,i){},f674:function(t,e,i){"use strict";i("a01c")},ffda:function(t,e,i){"use strict";i.r(e);var a=i("5530"),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-book"},[e("CommonToolbar",{staticClass:"m-reputation-tabs",attrs:{color:"#d16400",search:"",types:t.professions},on:{update:t.updateToolbar}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"listRef",staticClass:"m-content"},[0===t.active?t._l(t.list,(function(i,s){return e("div",{key:i.label+s,staticClass:"m-book-list"},[i.list.length?[e("div",{staticClass:"u-type",class:{reading:8===i.id}},[e("div",{staticClass:"u-title"},[t._v(" 【"+t._s(i.label)+"】 "),e("span",[t._v("共"),e("b",[t._v(t._s(i.total)+" ")]),t._v("本"+t._s(i.label))])]),8!==i.id?e("div",{staticClass:"u-all",on:{click:function(e){return t.clickTabs(i.id)}}},[t._v("查看全部")]):t._e()]),8!==i.id?e("CommonList",{attrs:{data:Object(a["a"])(Object(a["a"])({},t.itemData),{},{type:i.id})},on:{"update:load":t.handleLoad}},[e("div",{staticClass:"m-common-list"},t._l(i.list,(function(i,a){return e("BookCard",{key:a+Math.random(),style:t.isPhone?"":"width: calc(100% / ".concat(t.count," - 20px)"),attrs:{item:i,reporter:{aggregate:t.listId(i.list)}},on:{click:function(e){return t.setItem(i)}}})})),1)]):e("list-cross",{key:"recentRead",ref:"recentRead",refInFor:!0,attrs:{list:i.list,radius:10,gap:20},scopedSlots:t._u([{key:"default",fn:function(t){return[e("BookCard",{attrs:{item:t.item}})]}}],null,!0)})]:t._e()],2)})):e("div",{staticClass:"m-book-list"},[e("div",{staticClass:"u-type u-all-type"},[e("div",{staticClass:"u-title"},[t._v(t._s(t.$t(t.typeName)))]),t._v(" "),0!==t.active?e("div",{staticClass:"m-operate"},t._l(t.showTypes,(function(i){return e("div",{key:i.value+Math.random(),staticClass:"m-item",class:t.showType===i.value&&"active",on:{click:function(e){t.showType=i.value}}},[t._v(" "+t._s(t.$t(i.label))+" ")])})),0):t._e()]),t.subList.length?["card"===t.showType?e("div",{staticClass:"m-book-list--card"},t._l(t.subList,(function(i){return e("BookCard",{key:i.ID+Math.random(),attrs:{item:i,reporter:{aggregate:t.listId(t.subList)}}})})),1):t._e(),"list"===t.showType?e("div",{staticClass:"m-book-list--list"},[e("ListHead"),t._l(t.subList,(function(i){return e("BookItem",{key:i.ID+Math.random(),attrs:{item:i,reporter:{aggregate:t.listId(t.subList)}}})}))],2):t._e()]:t._e(),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",plain:"",loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v(t._s(t.$t("加载更多")))]),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"current-change":t.changePage}})],2)],2)],1)},n=[],o=i("2909"),r=(i("99af"),i("4de4"),i("c740"),i("d81d"),i("b0c0"),i("e9c4"),i("b64b"),i("d3b7"),i("ac1f"),i("841c"),i("159b"),i("015b")),l=i("a790"),c=i("e5d7"),u=i("6b19"),d=i("ed08"),h=i("2ef0"),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-book-card",on:{click:function(e){return t.go(t.item.idKey)}}},[e("div",{staticClass:"u-name"},[e("item-icon",{attrs:{item_id:String(t.item.ItemID),size:36,vertical:!0}})],1),e("div",{staticClass:"u-name"},[t._v(" "+t._s(this.getProfessionType(t.item.ExtendProfessionID1))+" ")]),e("div",{staticClass:"u-name"},[e("span",[t._v(t._s(t.item.BookName))])]),e("div",{staticClass:"u-name"},[e("span",[t._v(t._s(t.item.Desc))])]),e("div",{staticClass:"u-path",class:t.getOrigin(t.item)!==t.$t("其它")&&"special"},[e("span",[t._v(t._s(t.getOrigin(t.item)))])])])},f=[],v=(i("7db0"),i("14d9"),i("a9e3"),i("06f9")),m=(i("65c2"),i("fe6d")),g=i("782e"),b={name:"BookCard",components:{ItemIcon:v["a"]},props:{item:{type:Object,required:!0}},methods:{getProfessionType:function(t){return u.find((function(e){return e.id===Number(t)}))?u.find((function(e){return e.id===Number(t)})).name:""},go:function(t){this.$router.push("/".concat(t))},getOrigin:function(t){var e=this.$i18n.t.bind(this.$i18n),i=t.DoodadTemplateID,a=t.ShopNames,s=t.drops||[],n=null===t||void 0===t?void 0:t.Quests,o="";return i&&(o=o+(o?"/":"")+(this.bookMapInfo[i]?e("碑铭"):e("其它"))),a&&(o=o+(o?"/":"")+e("商店")),s.length&&(o=o+(o?"/":"")+e("秘境")),n&&(o=o+(o?"/":"")+e("任务")),o||(o=e("其它")),o}},computed:{client:function(){return this.$store.state.client},bookMapInfo:function(){return"std"===this.client?m:g}}},y=b,_=(i("8404"),i("2877")),C=Object(_["a"])(y,p,f,!1,null,"582f52c4",null),k=C.exports,w=i("e9e6"),I=function(t,e){return t("div",{staticClass:"m-list-head list-sticky-head"},[t("div",[e._v(e._s(e.parent.$t("名称")))]),t("div",[e._v(e._s(e.parent.$t("类型")))]),t("div",[e._v(e._s(e.parent.$t("套书")))]),t("div",[e._v(e._s(e.parent.$t("描述")))]),t("div",{staticStyle:{color:"#6f42c1"}},[e._v(e._s(e.parent.$t("来源")))])])},L=[],x={name:"ListHead"},O=x,j=(i("444c"),Object(_["a"])(O,I,L,!0,null,"7367d0cd",null)),$=j.exports,M=i("2f62"),T=i("1339"),D={name:"Index",components:{CommonList:l["a"],CommonToolbar:c["a"],BookCard:w["a"],BookItem:k,ListHead:$,ListCross:r["a"]},data:function(){return{loading:!1,keyword:"",active:0,data:[],itemData:{color:"#324148",width:"250",height:"380"},list:[{id:8,label:"最近阅读",page:1,pages:1,total:0,list:[]},{id:11,label:"杂集",page:1,pages:1,total:0,list:[]},{id:10,label:"道学",page:1,pages:1,total:0,list:[]},{id:9,label:"佛学",page:1,pages:1,total:0,list:[]}],page:1,total:0,per:0,count:0,showTypes:[{value:"list",label:"列表"},{value:"card",label:"卡片"}],showType:"card",appendMode:!1}},computed:Object(a["a"])(Object(a["a"])({professions:function(){var t=u.filter((function(t){return 8!==t.id})).map((function(t){return t.label=t.name,t.value=t.id,t}));return[{id:0,value:-1,name:"全部",label:"全部"}].concat(Object(o["a"])(t))}},Object(M["b"])(["recentReadList"])),{},{client:function(){return this.$store.state.client},params:function(){var t={client:this.client,per:this.per};return this.keyword&&(t.keyword=this.keyword),this.active&&(t.profession=this.active),t},typeName:function(){var t=this;return this.list.filter((function(e){return e.id==t.active}))[0].label},hasNextPage:function(){var t=this,e=this.list.filter((function(e){return e.id==t.active}))[0].pages;return e>1&&this.page<e},subList:function(){var t=this;return 0===this.active?null:this.list.filter((function(e){return e.id==t.active}))[0].list},isPhone:function(){return Object(d["b"])()},readingBook:function(){return localStorage.getItem("book_readings")||"[]"}}),watch:{params:{deep:!0,handler:function(){this.loadData()}},active:{immediate:!0,handler:function(){this.page=1}}},methods:{updateToolbar:function(t){var e=t.type,i=t.search;this.keyword=i,this.clickTabs(e)},clickTabs:function(t){this.active=-1==t?0:t,this.list=this.list.map((function(t){return t.page=1,t})),this.page=1},listId:function(t){return null!==t&&void 0!==t&&t.length?t.map((function(t){return t.ID})):[]},changePage:function(t){this.page=t,this.loadData()},setItem:function(t){var e=localStorage.getItem("book_readings")||"[]",i=[t].concat(Object(o["a"])(JSON.parse(e)));this.list[0].list.unshift(t),localStorage.setItem("book_readings",JSON.stringify(i))},showCount:function(){var t;if(this.isPhone)this.per=8;else{var e=(null===(t=this.$refs.listRef)||void 0===t?void 0:t.clientWidth)-120;this.count=Math.floor(e/this.itemData.width),this.per=this.count}},appendPage:function(){this.appendMode=!0,this.handleLoad(this.active,!0)},handleLoad:function(t,e){var i=this.list.filter((function(e){return e.id==t}))[0].page,a=Object(h["cloneDeep"])(this.params);a.page=i+1,a.per=e?3*this.per:this.per,a.profession=t,this.loadList(a,t)},loadData:function(){var t=this;this.loading=!0;var e=Object(h["omit"])(this.params,["profession"]);if(0===this.active){var i=this.list.filter((function(t){return 8!==t.id}));i.forEach((function(i){e.page=i.page,e.profession=i.id,e.per=t.per,t.loadList(e,i.id)}))}else e.page=this.page,e.per=3*this.per,this.loadList(Object(a["a"])(Object(a["a"])({},e),{},{profession:this.active}),this.active)},loadList:function(t,e){var i=this,a=this.list.findIndex((function(t){return t.id==e}));this.list[a].pages<t.page&&0===this.active&&(t.page=1),Object(T["b"])(t).then((function(t){var e=t.data,s=e.list,n=e.total,o=e.pages,r=e.page,l=i.appendMode?Object(h["concat"])(i.list[a].list,s):s;i.list[a].list=l||[],i.list[a].page=r||1,i.list[a].pages=o||1,i.list[a].total=n||0,0!==i.active&&(i.page=r||1),i.total=n})).finally((function(){i.loading=!1,i.appendMode=!1}))}},mounted:function(){this.showCount(),this.recentReadList.length&&(this.list[0].list=this.recentReadList,this.list[0].total=this.recentReadList.length)}},N=D,P=(i("33d3"),Object(_["a"])(N,s,n,!1,null,null,null));e["default"]=P.exports}}]);
//# sourceMappingURL=chunk-1424144a.2e86b955.js.map