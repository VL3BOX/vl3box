(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70ab23a8"],{"13d5":function(t,a,e){"use strict";var i=e("23e7"),s=e("d58f").left,n=e("a640"),r=e("2d00"),c=e("605d"),o=!c&&r>79&&r<83,u=o||!n("reduce");i({target:"Array",proto:!0,forced:u},{reduce:function(t){var a=arguments.length;return s(this,t,a,a>1?arguments[1]:void 0)}})},"22dd":function(t,a,e){},3367:function(t,a,e){"use strict";e.r(a);e("ac1f"),e("841c");var i=function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-knowledge-index"},[t.search?a("knowledgeList",{attrs:{list:t.list,total:t.total,pagination:t.pagination},on:{onPageKey:t.onPageKey}}):[a("wikiGuide"),a("wikiJargon"),a("wikiRecent")]],2)},s=[],n=(e("d3b7"),e("fd0c")),r=(e("9911"),function(){var t=this,a=t._self._c;return a("div",{staticClass:"m-knowledge-panel"},[a("div",{staticClass:"m-title"},[a("span",{staticClass:"u-text"},[a("i",{staticClass:"el-icon-orange"}),a("span",[t._v(" "+t._s(t.$t("玩法指南")))])]),a("router-link",{staticClass:"u-more",attrs:{to:"/type/game"}},[t._v(t._s(t.$t("查看更多"))+" »")])],1),a("div",{staticClass:"m-guide m-panel"},t._l(t.data,(function(e,i){return a("div",{key:i,staticClass:"u-guide"},[a("div",{staticClass:"u-title"},[t._v(t._s(e.label))]),a("div",{staticClass:"u-list"},t._l(e.menus,(function(e,i){return a("a",{key:i,staticClass:"u-label",attrs:{href:e.link},domProps:{innerHTML:t._s(e.label)}})})),0)])})),0)])}),c=[],o=(e("a15b"),e("13d5"),e("b0c0"),e("434b")),u={name:"Guide",data:function(){return{data:""}},computed:{},watch:{},methods:{getGuideData:function(){var t=this;Object(o["d"])({key:["guide-pve","guide-pvx","guide-pvp"].join(",")}).then((function(a){t.data=a.reduce((function(t,a){return t[a.name]=a,t}),{})}))}},created:function(){this.getGuideData()}},l=u,d=(e("feaa"),e("2877")),p=Object(d["a"])(l,r,c,!1,null,"354eb457",null),m=p.exports,g=function(){var t=this,a=t._self._c;return a("div",{staticClass:"m-knowledge-panel"},[a("div",{staticClass:"m-title"},[a("span",{staticClass:"u-title-left"},[a("i",{staticClass:"el-icon-postcard"}),a("span",[t._v(" "+t._s(t.$t("术语大全")))])]),a("router-link",{staticClass:"u-more",attrs:{to:"/type/jargon"}},[t._v(t._s(t.$t("查看更多"))+" »")])],1),a("div",{staticClass:"m-panel m-jargon"},t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"u-jargon"},[a("i",{staticClass:"el-icon-collection-tag"}),a("router-link",{staticClass:"u-name",attrs:{to:"/view/"+e.id}},[t._v(t._s(e.name))])],1)})),0)])},f=[],v={name:"Jargon",props:[],data:function(){return{list:""}},computed:{},watch:{},methods:{getJargon:function(){var t=this;Object(o["b"])({type:"jargon",per:48}).then((function(a){var e;t.list=(null===(e=a.data.data)||void 0===e?void 0:e.list)||[]}))}},created:function(){this.getJargon()}},h=v,_=(e("c3df"),Object(d["a"])(h,g,f,!1,null,"d5e47dca",null)),w=_.exports,b=function(){var t=this,a=t._self._c;return a("div",{staticClass:"m-knowledge-panel"},[a("div",{staticClass:"m-title m-recent-title"},[a("span",{staticClass:"u-title-left"},[a("i",{staticClass:"el-icon-time"}),a("span",[t._v(" "+t._s(t.$t("最新更新")))])])]),a("div",{staticClass:"m-recent m-panel"},t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"m-post"},[a("div",{staticClass:"m-head"},[a("div",{staticClass:"m-source"},[a("div",{staticClass:"u-source"},[a("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 412.72 412.72","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[a("path",{attrs:{d:"M404.72 82.944h-27.2v-9.28a8 8 0 00-5.76-8 225.345 225.345 0 00-57.68-7.36c-32 0-75.6 7.2-107.84 40-32-33.12-75.92-40-107.84-40a225.345 225.345 0 00-57.68 7.36 8 8 0 00-5.76 8v9.2H8a8 8 0 00-8 8v255.52a8 8 0 008 8 7.996 7.996 0 003.92-1.04c.8-.4 80.8-44.16 192.48-16h1.92a8.008 8.008 0 001.92 0c112-28.4 192 15.28 192.48 16a8 8 0 0012-6.88V90.944a8 8 0 00-8-8zM16 333.664V98.944h19.12v200.64a8 8 0 009.2 8 350.096 350.096 0 0150-4 207.516 207.516 0 0168.32 10.32A294.1 294.1 0 0016 333.664zm78.32-46a351.994 351.994 0 00-43.52 2.8V79.984a220.645 220.645 0 0147.44-5.28c29.92 0 71.2 6.88 99.84 39.2l.24 199.28c-16.64-10.88-49.12-25.52-104-25.52zm120-173.76c28.64-32 69.92-39.2 99.84-39.2a221.61 221.61 0 0147.44 5.28v210.48a351.895 351.895 0 00-43.28-2.88c-54.56 0-87.12 14.64-104 25.52v-199.2zm182.32 219.76a294.158 294.158 0 00-146.96-19.76 208.008 208.008 0 0168.64-10.32 349.994 349.994 0 0150.32 3.92 8 8 0 009.2-8V98.944h19.12l-.32 234.72z"}})]),a("router-link",{staticClass:"u-name",attrs:{to:{name:"view",params:{source_id:e.source_id}}}},[t._v(t._s(e.title))])],1),e.remark?a("div",{staticClass:"u-remark",domProps:{textContent:t._s("📑 "+e.remark)}}):t._e()])]),a("div",{staticClass:"m-user"},[a("div",{staticClass:"u-author"},[a("img",{staticClass:"u-icon",attrs:{src:t.showAvatar(e.user),alt:e.user_nickname}}),a("a",{staticClass:"u-name",attrs:{href:e.user_id?t.authorLink(e.user_id):null},domProps:{textContent:t._s(e.user_nickname)}})]),a("div",{staticClass:"u-updated",domProps:{textContent:t._s(t.ts2str(e.updated))}})]),a("div",{staticClass:"m-body"},[a("div",{staticClass:"u-excerpt",attrs:{to:{name:"view",params:{source_id:e.source_id}}},domProps:{innerHTML:t._s(t.ellipsis(e.content))}})])])})),0)])},k=[],C=e("85e4"),y=e("500d"),j=e("cf45"),O={name:"Recent",data:function(){return{list:[]}},computed:{},watch:{},methods:{getRecentData:function(){var t=this;y["a"].latest({type:"knowledge"},{client:null}).then((function(a){var e,i;t.list=null!==(e=null===(i=a.data.data)||void 0===i?void 0:i.list)&&void 0!==e?e:[]}),(function(){t.list=[]}))},showAvatar:function(t){var a=(null===t||void 0===t?void 0:t.user_avatar)||"";return Object(C["showAvatar"])(a)},ts2str:C["ts2str"],authorLink:C["authorLink"],ellipsis:j["a"]},created:function(){this.getRecentData()}},x=O,$=(e("bc31"),Object(d["a"])(x,b,k,!1,null,"2a5a6f21",null)),P=$.exports,T={name:"KnowledgeIndex",components:{knowledgeList:n["a"],wikiJargon:w,wikiGuide:m,wikiRecent:P},data:function(){return{loading:!1,search:"",list:"",page:1,per:20,total:1,pages:1}},computed:{params:function(){var t={per:this.per,page:this.page,_search:this.search};return t},pagination:function(){return{page:this.page,total:this.total,per:this.per}},routeSearch:function(){return this.$route.query.search}},watch:{params:function(){this.getSearchData()}},methods:{getSearchData:function(){var t=this;this.loading=!0,Object(o["b"])(this.params).then((function(a){t.list=a.data.data.list||[],t.total=a.data.data.total})).finally((function(){t.loading=!1}))},onSearchKey:function(t){this.search=t,this.page=1},onPageKey:function(t){this.page=t}},created:function(){}},J=T,L=(e("4ed5"),Object(d["a"])(J,i,s,!1,null,null,null));a["default"]=L.exports},"498a":function(t,a,e){"use strict";var i=e("23e7"),s=e("58a8").trim,n=e("c8d2");i({target:"String",proto:!0,forced:n("trim")},{trim:function(){return s(this)}})},"4ed5":function(t,a,e){"use strict";e("8490")},"500d":function(t,a,e){"use strict";e.d(a,"a",(function(){return r})),e.d(a,"b",(function(){return c}));var i=e("41cb");const s=(t,a)=>Object(i["d"])().get("/pet/"+t,{params:a}),n=location.href.includes("origin")?"origin":"std",r={latest({type:t},a){return Object(i["a"])().get("/api/cms/wiki/post/latest",{params:{client:n,...a,type:t}})},mine(t){return Object(i["a"])().get("/api/cms/wiki/post/mine",{params:t})},counter({type:t},a){return Object(i["a"])().get("/api/cms/wiki/post/counter",{params:{client:n,...a,type:t}})},achievements(t){return Object(i["d"])().get("/achievement/list",{params:{client:n,...t}})},get({type:t,id:a},e){return Object(i["a"])().get(`/api/cms/wiki/post/type/${t}/source/${a}`,{params:{client:n,...e}})},getById(t){return Object(i["a"])().get("/api/cms/wiki/post/id/"+t)},post(t){return Object(i["a"])().post("/api/cms/wiki/post",t)},update(t,a){return Object(i["a"])().put("/api/cms/wiki/post/"+t,a)},remove(t){return Object(i["a"])().delete("/api/cms/wiki/post/"+t)},versions({type:t,id:a},e){return Object(i["a"])().get(`/api/cms/wiki/post/type/${t}/source/${a}/versions`,{params:{client:n,...e}})},async handleMix(t,a,e,i){let s="",n="",r=!0,c=!1,o=[];if("std"===e){const u=await this.get({type:t,id:a},{client:e,...i});return s=u.data.data.post,n=u.data.data.source,o=u.data.data.users,s&&(r=!1),console.log("获取旗舰攻略"),{post:s,source:n,isEmpty:r,compatible:c,type:t,source_id:a,users:o}}{const u=await this.get({type:t,id:a},{client:e,...i});n=u.data.data.source,s=u.data.data.post,o=u.data.data.users,s&&(r=!1),console.log("获取缘起攻略");const l=!!u.data.data.post;return l?{post:s,source:n,isEmpty:r,compatible:c,type:t,source_id:a,users:o}:(console.log("兼容：获取旗舰攻略"),this.get({type:t,id:a},{client:"std",...i}).then(e=>(s=e.data.data.post,n||(n=e.data.data.source),s&&(r=!1),o=e.data.data.users,c=!0,{post:s,source:n,isEmpty:r,compatible:c,type:t,source_id:a,users:o})))}},async mix({type:t,id:a,client:e},i){let n="",r="";if(n="cj"===t?"achievement":"pet"===t?"item":t||"achievement",a){if(r=a,"pet"===t){const t=await s(a,{client:e});let r=t.data,c=r.ItemTabType+"_"+r.ItemTabIndex;return this.handleMix(n,c,e,i)}return this.handleMix(n,r,e,i)}}},c={list({type:t,id:a},e){return Object(i["a"])().get("/api/cms/wiki/comment",{params:{...e,type:t,source_id:a}})},post(t){return Object(i["a"])().post("/api/cms/wiki/comment",t)},delete(t){return Object(i["a"])().delete("/api/cms/wiki/comment/"+t)},myList(t){return Object(i["a"])().get("/api/cms/wiki/comment/mine",{params:t})}}},"572f":function(t,a,e){},5790:function(t,a,e){"use strict";e("78da")},"78da":function(t,a,e){},8490:function(t,a,e){},8887:function(t,a,e){},a15b:function(t,a,e){"use strict";var i=e("23e7"),s=e("e330"),n=e("44ad"),r=e("fc6a"),c=e("a640"),o=s([].join),u=n!==Object,l=u||!c("join",",");i({target:"Array",proto:!0,forced:l},{join:function(t){return o(r(this),void 0===t?",":t)}})},ae25:function(t){t.exports=JSON.parse('{"game":"el-icon-orange","jargon":"el-icon-postcard","plot":"el-icon-collection","bigbang":"el-icon-mic","gossip":"el-icon-film","organization":"el-icon-school","player":"el-icon-user","sleep":"el-icon-map-location","npc":"el-icon-monitor","castle":"el-icon-coordinate","blacklist":"el-icon-warning-outline","other":"el-icon-more-outline"}')},b3a7:function(t,a,e){},bc31:function(t,a,e){"use strict";e("22dd")},c3df:function(t,a,e){"use strict";e("8887")},c49a:function(t,a,e){"use strict";e("572f")},c8d2:function(t,a,e){"use strict";var i=e("5e77").PROPER,s=e("d039"),n=e("5899"),r="​᠎";t.exports=function(t){return s((function(){return!!n[t]()||r[t]()!==r||i&&n[t].name!==t}))}},cf45:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));e("fb6a"),e("ac1f"),e("5319"),e("498a");var i=function(t){return t=t?t.trim().replace(/<[^>]*>/g,""):"",t.length>100?t.slice(0,100)+"...":t}},d58f:function(t,a,e){"use strict";var i=e("59ed"),s=e("7b0b"),n=e("44ad"),r=e("07fa"),c=TypeError,o="Reduce of empty array with no initial value",u=function(t){return function(a,e,u,l){var d=s(a),p=n(d),m=r(d);if(i(e),0===m&&u<2)throw new c(o);var g=t?m-1:0,f=t?-1:1;if(u<2)while(1){if(g in p){l=p[g],g+=f;break}if(g+=f,t?g<0:m<=g)throw new c(o)}for(;t?g>=0:m>g;g+=f)g in p&&(l=e(l,p[g],g,d));return l}};t.exports={left:u(!1),right:u(!0)}},fd0c:function(t,a,e){"use strict";var i=function(){var t=this,a=t._self._c;return a("div",[t.list?a("div",{staticClass:"m-knowledge"},[t.list.length?t._l(t.list,(function(t,e){return a("knowledgeItem",{key:e,attrs:{data:t}})})):t._e()],2):t._e(),a("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.pagination.per,total:t.pagination.total,"current-page":t.pagination.page},on:{"update:currentPage":function(a){return t.$set(t.pagination,"page",a)},"update:current-page":function(a){return t.$set(t.pagination,"page",a)},"current-change":t.changePage}})],1)},s=[],n=(e("b0c0"),function(){var t=this,a=t._self._c;return t.data?a("router-link",{staticClass:"m-knowledge-item",attrs:{to:{name:"view",params:{source_id:t.data.id}}}},[a("div",{staticClass:"u-name"},[a("span",{staticClass:"u-type"},[a("i",{staticClass:"u-icon",class:t.icons[t.data.type]}),t._v(" "+t._s(t.data.label))]),a("span",{staticClass:"u-title"},[t._v(t._s(t.data.name))])]),t.hasTag(t.data.post)?a("div",{staticClass:"u-tags"},[a("i",{staticClass:"el-icon-price-tag"}),t._l(t.formatTags(t.data.post.tags),(function(e){return a("span",{key:e},[t._v(t._s(e))])}))],2):t._e(),t.data.post?a("span",{staticClass:"u-remark"},[a("i",{staticClass:"el-icon-edit"}),t._v(t._s(t.$t("最后修订：")+t.data.post.remark)+"@"+t._s(t.data.post.user_nickname)+" ")]):t._e(),t.data.updated?a("div",{staticClass:"u-updated"},[a("i",{staticClass:"el-icon-refresh"}),a("span",[t._v(" "+t._s(t.$t("最后更新于")+t.date_format(t.data.updated)))])]):t._e()]):t._e()}),r=[],c=(e("d81d"),e("498a"),e("ae25")),o=e("85e4"),u={name:"item",props:["data"],data:function(){return{icons:c,date_format:o["ts2str"]}},computed:{},watch:{},methods:{hasTag:function(t){return t&&t.tags},formatTags:function(t){return t.split(",").map((function(t){return t.trim()}))}},created:function(){}},l=u,d=(e("5790"),e("2877")),p=Object(d["a"])(l,n,r,!1,null,null,null),m=p.exports,g={name:"list",props:["list","pagination"],components:{knowledgeItem:m},methods:{changePage:function(t){this.$emit("onPageKey",t)}}},f=g,v=(e("c49a"),Object(d["a"])(f,i,s,!1,null,null,null));a["a"]=v.exports},feaa:function(t,a,e){"use strict";e("b3a7")}}]);
//# sourceMappingURL=chunk-70ab23a8.94ad2332.js.map