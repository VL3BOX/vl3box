(function(t){function e(e){for(var i,r,o=e[0],c=e[1],l=e[2],u=0,f=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={login:0},n=[];function r(t){return o.p+"js/"+({"vi-json":"vi-json","zh-CN-json":"zh-CN-json"}[t]||t)+"."+{"vi-json":"f75ec3dd","zh-CN-json":"0624a2c6"}[t]+".js"}function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=s[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise((function(e,i){a=s[t]=[e,i]}));e.push(a[2]=i);var n,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=r(t);var l=new Error;n=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=s[t];if(0!==a){if(a){var i=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",l.name="ChunkLoadError",l.type=i,l.request=n,a[1](l)}s[t]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:c})}),12e4);c.onerror=c.onload=n,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="https://vl3box.com/static/account/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("8189")},"0111":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("header",{staticClass:"m-header"},[e("a",{attrs:{href:t.homepage}},[e("svg",{class:"u-logo",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{staticClass:"fil0",attrs:{d:"M129.254 5.842l102.93 59.427-31.87 18.4-.982-.566c.994-2.975-.028-5.876-2.019-8.167l-4.238-4.874-4.875-4.238c-4.609-4.007-11.22-2.951-13.087 3.295l-45.859-26.476-48.092 27.766c-3.008-2.576-6.243-4.596-7.711-5.336.556 3.007 1.122 5.906 1.436 8.959l-16.692 9.637-31.87-18.4L129.254 5.842zM236 71.878v118.854l-102.929 59.426v-36.801l71.059-41.026V90.279L236 71.878zm-110.561 178.28l-102.93-59.426V71.878l31.87 18.401v38.385a71.299 71.299 0 00-9.941 3.888c3.476 1.394 6.816 2.952 9.941 4.768v35.011l13.63 7.87c-.448 5.196-.681 10.447-.884 15.81 7.698-.047 17.263-.298 24.365-2.254l33.949 19.6v36.801zM73.64 189.497c.616-12.288.824-17.667 6.46-25.262 5.453 5.878 11.556 10.552 18.453 13.546a44.686 44.686 0 004.644 1.718c-10.202 9.114-15.093 9.273-29.557 9.998zm55.206-82.269a30.61 30.61 0 00-4.996 4.101c-2.432 2.476-4.35 5.302-5.436 8.228l6.691-6.474c1.381-1.335 2.902-4.048 3.741-5.855zm15.54-14.454c-2.664.429-4.875 1.064-6.833 1.861 2.112.623 4.007 1.195 6.817 2.037l.016-3.898zm15.213-7.165l1.942.821 1.516-1.49a56.852 56.852 0 00-6.694-2.647l3.236 3.316zm-7.44-4.519c-3.687-.918-7.615-1.549-11.775-1.863 2.509-1.954 8.004-2.992 11.839-3.871-6.24-2.525-17.137-2.863-26.058-.017-.495 1.506-1.483 3.868-2.685 4.952-1.586 1.43-3.063 2.694-4.373 3.915 10.1-4.479 20.923-4.799 31.527-1.855l1.525-1.261zM82.1 80.589c1.213 7.898-1.998 20.612-2.61 22.231-.613 1.618-1.421 3.479-4.084 10.137-2.664 6.658-2.451 19.463-.66 23.5-4.342-3.055-9.693-4.784-14.795-2.94 8.582 4.379 13.448 14.094 19.147 21.551 13.089 17.129 29.219 25.133 49.926 19.37 10.231-2.847 25.104-22.701 16.335-30.342-15.181 8.569-31.513-2.404-32.155-19.114-.467-12.171 12.786-24.526 25.65-26.107-5.249-1.572-7.043-2.387-13.788-1.313 6.068-4.449 10.642-7.967 21.017-8.998.637-1.192 1.667-2.01 2.687-2.853-12.985-3.363-31.961-2.924-48.429 18.886 4.904-10.82 8.443-15.182 20.698-27.127 3.233-3.151 2.587-7.771 2.183-10.966-3.448 5.663-9.754 8.745-18.349 12.542-6.518 2.879-12.428 7.647-16.78 13.669-1.091-4.665-2.175-8.865-5.993-12.126zm62.075 89.198a95.605 95.605 0 004.608-2.046c-4.35 7.066-14.86 14.943-33.852 17.435 20.304 5.345 39.698 2.31 51.914-10.359-.979 1.719-1.998 3.546-3.118 5.174 14.984-8.658 34.487-34.111 20.514-58.638 2.36 1.92 4.335 4.253 6.008 7.432.11-11.661-3.429-22.244-10.167-30.625l-3.947 4.018 7.299 7.124-5.446 6.584c-2.667 3.225-4.416 3.231-7.72 3.242l-4.616.018c-.087 1.544-.742 2.979-1.882 4.027l-.072 3.376c-.069 3.225-1.915 6.394-5.122 7.359l.001.005c-3.864 1.15-7.022 3.497-9.786 6.353 1.943 1.713 3.186 3.805 3.841 6.157 1.06 3.809.418 8.087-1.322 12.281-1.663 4.008-4.251 7.851-7.135 11.083zm-25.774-43.979l9.782-9.463c1.993-1.929 4.901-6.745 5.964-10.318.226-.761 1.197-1.434 2.541-1.463l6.485-.139.357-1.122c.196-.616.459-.706 1.011-.709l4.176-.02a.392.392 0 00.379-.39l.037-9.184c.007-1.797-.026-2.719 1.393-3.893l2.944-2.433 7.412 7.594 18.945-18.61 1.185-4.634c.463-1.81 1.741-1.749 3.146-.528l4.538 3.945 3.945 4.538c1.22 1.405 1.282 2.683-.528 3.146l-4.634 1.185-18.611 18.945 7.595 7.412-2.434 2.943c-1.173 1.42-2.096 1.387-3.892 1.394l-9.184.037a.39.39 0 00-.39.379l-.02 4.176c-.003.552-.093.815-.709 1.011l-1.122.358-.139 6.484c-.029 1.344-.703 2.315-1.463 2.541-3.573 1.063-8.389 3.971-10.318 5.964l-5.142 5.316c-5.88 2.918-11.824 2.547-17.096-2.205-3.029-2.731-5.197-6.561-5.943-10.779a20.577 20.577 0 01-.21-1.478z"}})])]),e("el-divider",{staticClass:"u-title"},[t._v("VL3BOX - JX3BOX")])],1)},s=[],n=a("65c2"),r={name:"CardHeader",data:function(){return{homepage:n["__Root"]}}},o=r,c=a("2877"),l=Object(c["a"])(o,i,s,!1,null,null,null);e["a"]=l.exports},2777:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d3b7");var i=a("bc3a"),s=a.n(i);a.d(e,"b",(function(){return s.a}));var n=a("2b0e"),r=a("5c96"),o=s.a.create({withCredentials:!0});n["default"].prototype.$message=r["Message"],n["default"].prototype.$notify=r["Notification"];new n["default"];function c(t){t["interceptors"]["response"].use((function(t){return t}),(function(t){return console.log(t),Promise.reject(t)}))}c(s.a),c(o)},"3f10":function(t,e,a){},4491:function(t,e,a){"use strict";a("7b32")},5080:function(t,e,a){"use strict";a("3f10")},"78cb":function(t,e,a){"use strict";a("bda7")},"7b32":function(t,e,a){},8189:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=a("5c96"),n=a.n(s),r=a("a925"),o=a("269b"),c=(a("6b30"),a("c5b4"),a("0af6")),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-card",attrs:{id:"app"}},[e("el-card",{staticClass:"box-card"},[e("CardHeader"),e("Msg"),t.isLogin?[e("div",{staticClass:"m-login-in"},[e("el-alert",{staticClass:"u-current-info",attrs:{type:"warning","show-icon":"",closable:!1,center:""}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("已登录为"))+" "),e("b",[t._v(t._s(t.username))])])]),e("el-button",{staticClass:"u-logout",attrs:{type:"danger",size:"medium"},on:{click:t.logout}},[t._v(t._s(t.$t("登 出")))])],1)]:[null==t.success?e("main",{staticClass:"m-main"},[e("form",{ref:"loginForm"},[e("div",{staticClass:"u-email"},[e("el-input",{staticClass:"u-text u-email",attrs:{placeholder:t.$t("邮箱地址"),minlength:"3",maxlength:"50"},on:{change:t.checkEmail},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}},[e("template",{slot:"prepend"},[e("svg",{class:"i-mail",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M467 61H45C20.218 61 0 81.196 0 106v300c0 24.72 20.128 45 45 45h422c24.72 0 45-20.128 45-45V106c0-24.72-20.128-45-45-45zm-6.214 30L256.954 294.833 51.359 91h409.427zM30 399.788V112.069l144.479 143.24L30 399.788zM51.213 421l144.57-144.57 50.657 50.222c5.864 5.814 15.327 5.795 21.167-.046L317 277.213 460.787 421H51.213zM482 399.787L338.213 256 482 112.212v287.575z"}})])])],2),e("div",{staticClass:"u-tip"},[e("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==t.email_validate,expression:"email_validate == false"}],attrs:{title:t.email_validate_tip,type:"error","show-icon":"",closable:!1}})],1)],1),e("div",{staticClass:"u-pass"},[e("el-input",{staticClass:"u-text",attrs:{placeholder:t.$t("输入密码"),"show-password":""},on:{input:t.checkPass},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},model:{value:t.pass,callback:function(e){t.pass=e},expression:"pass"}},[e("template",{slot:"prepend"},[e("svg",{class:"i-pass",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M437.333 192h-32v-42.667C405.333 66.99 338.344 0 256 0S106.667 66.99 106.667 149.333V192h-32A10.66 10.66 0 0064 202.667v266.667C64 492.865 83.135 512 106.667 512h298.667C428.865 512 448 492.865 448 469.333V202.667A10.66 10.66 0 00437.333 192zM287.938 414.823a10.67 10.67 0 01-10.604 11.844h-42.667a10.67 10.67 0 01-10.604-11.844l6.729-60.51c-10.927-7.948-17.458-20.521-17.458-34.313 0-23.531 19.135-42.667 42.667-42.667s42.667 19.135 42.667 42.667c0 13.792-6.531 26.365-17.458 34.313l6.728 60.51zM341.333 192H170.667v-42.667C170.667 102.281 208.948 64 256 64s85.333 38.281 85.333 85.333V192z"}})])])],2),e("div",{staticClass:"u-tip"},[e("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==t.pass_validate,expression:"pass_validate == false"}],attrs:{title:t.pass_validate_tip,type:"error","show-icon":"",closable:!1}})],1)],1),e("el-button",{staticClass:"u-submit u-button",attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(t.$t("登录")))])],1),e("LoginWith"),e("footer",{staticClass:"m-footer"},[e("p",{staticClass:"u-login"},[t._v(" "+t._s(t.$t("还没有账号"))+"? "),e("a",{attrs:{href:t.register_url}},[t._v(t._s(t.$t("立即注册"))+" »")])]),e("p",{staticClass:"u-resetpwd"},[e("a",{attrs:{href:"../password_reset"}},[t._v(t._s(t.$t("忘记密码"))+"?")])])])],1):t._e(),1==t.success?e("main",{staticClass:"m-main"},[e("el-alert",{attrs:{title:t.$t("登录成功"),type:"success",description:t.$t("欢迎回来(#^.^#)"),"show-icon":"",closable:!1}}),e("a",{staticClass:"u-skip el-button u-button el-button--primary",attrs:{href:t.redirect}},[t._v(t._s(t.redirect_button))])],1):t._e(),0==t.success?e("main",{staticClass:"m-main"},[e("el-alert",{attrs:{title:t.$t("登录失败"),type:"error",description:t.errors,"show-icon":"",closable:!1}}),e("el-button",{staticClass:"u-button u-submit",attrs:{type:"primary"},on:{click:t.reset}},[t._v(t._s(t.$t("返回")))])],1):t._e()]],2),e("Bottom")],1)},u=[],d=(a("b0c0"),a("d3b7"),a("ac1f"),a("3ca3"),a("841c"),a("ddb0"),a("9861"),a("88a7"),a("271a"),a("5494"),a("0111")),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-oauth"},[e("el-divider",{staticClass:"u-title"},[t._v("OR")]),e("el-row",{attrs:{gutter:20}})],1)},p=[],h=(a("caad"),a("2532"),a("5319"),a("e4f2")),m=a("c9d2"),v=location.host.includes("origin")?"origin":"std",b={name:"LoginWith",props:[],data:function(){return{github:this.buildState(h["a"].github),qq:this.buildState(h["a"].qq),weibo:this.buildState(h["a"].weibo),wechat:this.buildState(h["a"].wechat)}},computed:{},methods:{buildState:function(t){return t.replace("state=login","state=login_".concat(v))}},mounted:function(){},components:{}},_=b,g=(a("4491"),a("2877")),w=Object(g["a"])(_,f,p,!1,null,null,null),y=w.exports,C=a("ec26"),k=a("96d9"),x=a("65c2"),j=a("c761"),z=a("9945"),O=z.validator,M=a("f3e4"),L={name:"Login",data:function(){return{success:null,redirect:"",redirect_button:"",errors:"未知异常",email:"",email_validate:null,email_validate_tip:"用户名有效长度为3-50个字符",pass:"",pass_validate:null,pass_validate_tip:"密码有效长度为6-50个字符",homepage:x["__Root"],failcount:0,faillimit:10,device_id:"",isLogin:m["a"].isLogin(),username:m["a"].getInfo().name}},computed:{ready:function(){return this.email_validate&&this.pass_validate},register_url:function(){return"../register?redirect="+this.redirect}},methods:{checkEmail:function(){if(""!=this.email){var t=O(this.email,{len:[3,50]});this.email_validate=t}else this.email_validate=!1},checkPass:function(){if(""!=this.pass){var t=O(this.pass,{len:[6,50]});this.pass_validate=t}else this.pass_validate=!1},submit:function(){var t=this;this.isfrozen()||(this.ready||(this.checkPass(),this.checkEmail()),this.ready&&Object(k["b"])({email:this.email,pass:this.pass,device_id:this.device_id}).then((function(e){if(e.data.code)t.success=!1,t.errors=e.data.msg,t.failcount++,t.frozen();else{t.success=!0;var a=e.data.data;m["a"].update(a).then((function(){t.skip()})).catch((function(t){alert("浏览器版本太低,不支持本站")}))}})).catch((function(e){t.success=!1,t.errors="网络异常或非法请求"})))},reset:function(){this.success=null,this.email="",this.email_validate=null,this.pass="",this.pass_validate=null},frozen:function(){this.failcount>=this.faillimit&&M.set("loginIsFrozen","true",86400)},isfrozen:function(){return this.failcount>=this.faillimit&&(this.success=!1,this.errors="失败次数过多,请24小时后再试",!0)},checkDirect:function(){var t=new URLSearchParams(document.location.search),e=t.get("redirect");e?(this.redirect=e,this.redirect_button="即将跳转"):(this.redirect=this.homepage,this.redirect_button="返回首页"),console.log(decodeURIComponent(this.redirect))},checkDeviceID:function(){if(localStorage){var t=localStorage.getItem("device_id");this.device_id=t||Object(C["a"])(),localStorage.setItem("device_id",this.device_id)}},skip:function(){var t=this;this.redirect&&setTimeout((function(){location.href=decodeURIComponent(t.redirect)}),1200)},logout:function(){m["a"].destroy().then((function(){location.reload()}))}},filters:{},mounted:function(){this.checkDirect(),this.checkDeviceID()},components:{CardHeader:d["a"],LoginWith:y,Msg:j["a"]}},P=L,S=(a("78cb"),Object(g["a"])(P,l,u,!1,null,null,null)),$=S.exports;i["default"].config.productionTip=!1,i["default"].use(n.a),i["default"].use(r["a"]),i["default"].component("Bottom",c["a"]),new i["default"]({i18n:o["a"],render:function(t){return t($)}}).$mount("#app")},"96d9":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return c}));var i=a("2777"),s=a("65c2");function n(t){return i["b"].get(s["__server"]+"account/email/check",{params:{user_email:t}})}function r(t){return i["b"].post(s["__server"]+"account/register/email",{user_email:t.email,user_pass:t.pass})}function o(t){return i["a"].post(s["__server"]+"account/login/email",{user_email:t.email,user_pass:t.pass,device_id:t.device_id})}function c(t){return i["b"].get(s["__server"]+"account/email/verify",{params:{uid:t.uid,code:t.code}})}},bb3b:function(t,e,a){var i={"./vi.json":["9e04","vi-json"],"./zh-CN.json":["56e0","zh-CN-json"]};function s(t){if(!a.o(i,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],s=e[0];return a.e(e[1]).then((function(){return a.t(s,3)}))}s.keys=function(){return Object.keys(i)},s.id="bb3b",t.exports=s},bda7:function(t,e,a){},c761:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return t.data?e("div",{staticClass:"m-account-msg",domProps:{innerHTML:t._s(t.data)}}):t._e()},s=[],n=a("685b"),r={data:function(){return{data:""}},mounted:function(){var t=this;Object(n["a"])("account").then((function(e){t.data=e.data.data.breadcrumb.html}))}},o=r,c=(a("5080"),a("2877")),l=Object(c["a"])(o,i,s,!1,null,null,null);e["a"]=l.exports},f3e4:function(t,e,a){function i(t,e,a){document.cookie=t+"="+e+"; Max-Age="+a}function s(t,e){document.cookie=t+"="+e+"; Max-Age=0"}function n(t){t+="=";for(var e=document.cookie.split(";"),a=0;a<e.length;a++){var i=e[a].trim();if(0==i.indexOf(t))return i.slice(t.length,t.length)}return""}a("fb6a"),a("498a"),t.exports={get:n,set:i,del:s}}});
//# sourceMappingURL=login.a2caa60d.js.map