(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5e9cb369"],{"11d2":function(t,n,a){"use strict";a("b900")},"647d":function(t,n,a){"use strict";a.d(n,"c",(function(){return i})),a.d(n,"d",(function(){return s})),a.d(n,"a",(function(){return c})),a.d(n,"b",(function(){return o})),a.d(n,"f",(function(){return r})),a.d(n,"e",(function(){return u}));a("99af");var e=a("41cb");function i(t){return Object(e.a)().get("/api/cms/posts/user/my/union",{params:t})}function s(t){return Object(e.a)().delete("/api/cms/post/".concat(t,"/authors/quit"))}function o(t){return Object(e.a)().get("/api/cms/post/".concat(t,"/authors"))}function c(t,n){return Object(e.a)().post("/api/cms/post/".concat(t,"/author/").concat(n),{label:"撰稿",r_edit:1})}function r(t,n,a){return Object(e.a)().put("/api/cms/post/".concat(t,"/author/").concat(n),a)}function u(t,n){return Object(e.a)().delete("/api/cms/post/".concat(t,"/author/").concat(n))}},"66b6":function(t,n,a){"use strict";a.r(n);a("a434"),a("b0c0"),a("d3b7");var e=a("c402"),i=a("647d"),s=a("85e4"),o=a("65c2"),c=a("fb923"),r={name:"work",props:[],data:function(){return{loading:!1,data:[],total:1,page:1,per:10}},computed:{params:function(){return{page:this.page,per:this.per,is_active:~~this.isActive}},subtype:function(){return"union_active"==this.$route.name?this.$t("邀请创作"):this.$t("受邀创作")},isActive:function(){return"union_active"==this.$route.name}},watch:{params:{deep:!0,immediate:!0,handler:function(t){this.loadPosts()}}},methods:{loadPosts:function(){var t=this;this.loading=!0,Object(i.c)(this.params).then((function(n){t.data=n.data.data.list||[],t.total=n.data.data.total})).finally((function(){t.loading=!1}))},edit:function(t,n){location.href="./#/"+t+"/"+n},postLink:function(t,n){return Object(s.getLink)(t,n)},quit:function(t,n){var a=this;Object(i.d)(t).then((function(t){a.$notify({title:a.$t("退出成功"),message:a.$t("成功退出该作品联合创作"),type:"success"}),a.data.splice(n,1)}))},del:function(t,n){var a=this;this.$alert(this.$t("确定要删除吗？"),this.$t("确认信息"),{confirmButtonText:this.$t("确定"),callback:function(i){"confirm"==i&&Object(e.a)(t).then((function(t){a.$notify({title:a.$t("删除成功"),message:a.$t("成功删除作品"),type:"success"}),a.data.splice(n,1)}))}})}},filters:{dateFormat:function(t){return Object(c.a)(new Date(t))},visibleFormat:function(t){return o.__visibleMap[~~t]}}},u=(a("11d2"),a("2877")),l=Object(u.a)(r,(function(){var t=this,n=t._self._c;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-dashboard-work m-dashboard-cms m-dashboard-union"},[n("div",{staticClass:"m-dashboard-work-header"},[n("h2",{staticClass:"u-title"},[t._v(" "+t._s(t.$t("联合创作"))+" "),n("span",{staticClass:"u-subtype"},[n("i",{staticClass:"el-icon-arrow-right"}),n("span",[t._v(t._s(t.subtype))])])])]),n("div",{staticClass:"m-dashboard-box"},[t.data&&t.data.length?n("ul",{staticClass:"m-dashboard-box-list"},t._l(t.data,(function(a,e){return n("li",{key:e},[a.union_post_raw?[n("i",{staticClass:"u-icon"},["publish"==a.union_post_raw.post_status?n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16","aria-hidden":"true",fill:"#555","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"}})]):n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16",fill:"#dbab09","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M4 13H3v-1h1v1zm8-6v7c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h1V4c0-2.2 1.8-4 4-4s4 1.8 4 4v2h1c.55 0 1 .45 1 1zM3.8 6h4.41V4c0-1.22-.98-2.2-2.2-2.2-1.22 0-2.2.98-2.2 2.2v2H3.8zM11 7H2v7h9V7zM4 8H3v1h1V8zm0 2H3v1h1v-1z"}})])]),n("a",{staticClass:"u-title",attrs:{target:"_blank",href:t.postLink(a.union_post_raw.post_type,a.union_post_raw.ID)}},[t._v(t._s(a.union_post_raw.post_title||t.$t("无标题")))]),n("div",{staticClass:"u-desc"},[n("span",{staticClass:"u-desc-subitem"},[n("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(t._f("visibleFormat")(a.union_post_raw.visible))+" ")]),n("time",{staticClass:"u-desc-subitem"},[n("i",{staticClass:"el-icon-finished"}),t._v(" "+t._s(t.$t("发布 :"))+" "+t._s(t._f("dateFormat")(a.union_post_raw.post_date))+" ")]),n("time",{staticClass:"u-desc-subitem"},[n("i",{staticClass:"el-icon-refresh"}),t._v(" "+t._s(t.$t("更新 :"))+" "+t._s(t._f("dateFormat")(a.union_post_raw.post_modified))+" ")])]),n("el-button-group",{staticClass:"u-action"},[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",title:t.$t("编辑")},on:{click:function(n){return t.edit(a.union_post_raw.post_type,a.union_post_raw.ID)}}}),t.isActive?n("el-button",{attrs:{size:"mini",icon:"el-icon-delete",title:t.$t("删除")},on:{click:function(n){return t.del(a.union_post_raw.ID,e)}}}):n("el-popconfirm",{attrs:{title:"确认退出该作品的联合创作者身份吗？"},on:{confirm:function(n){return t.quit(a.union_post_raw.ID,e)}}},[n("el-button",{staticClass:"u-quit",attrs:{slot:"reference",size:"mini",icon:"el-icon-download",title:t.$t("退出联合身份")},slot:"reference"})],1)],1)]:t._e()],2)})),0):n("el-alert",{staticClass:"m-dashboard-box-null",attrs:{title:t.$t("没有找到相关条目"),type:"info",center:"","show-icon":""}}),n("el-pagination",{staticClass:"m-dashboard-box-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(n){t.page=n},"update:current-page":function(n){t.page=n}}})],1)])}),[],!1,null,null,null);n.default=l.exports},b900:function(t,n,a){},fb923:function(t,n,a){"use strict";a("99af");function e(t){return t<10?"0"+t:t}n.a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.getFullYear(),s=t.getMonth()+1,o=t.getDate(),c=a?"".concat(i).concat(n).concat(e(s)).concat(n).concat(e(o)):"".concat(i).concat(n).concat(s).concat(n).concat(o);return c}}}]);
//# sourceMappingURL=chunk-5e9cb369.f4dbfe22.js.map