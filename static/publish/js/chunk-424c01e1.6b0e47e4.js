(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-424c01e1"],{"024d":function(t,e,s){"use strict";s.r(e);var i,a=s("c7eb"),n=s("1da1"),c=(s("99af"),s("14d9"),s("a434"),s("e4f1")),o={name:"draft",props:[],components:{},data:function(){return{data:[]}},computed:{isSupported:function(){return!!window.localStorage},isNotNull:function(){return!!this.data&&!!this.data.length},isWeb:function(t){return"web"===t.activeName},db:function(){return this.$store.state.db}},methods:{loadDrafts:(i=Object(n.a)(Object(a.a)().mark((function t(){var e,s,i;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db.length();case 2:e=t.sent,s=0;case 4:if(!(s<e)){t.next=18;break}return t.next=7,this.db.key(s);case 7:return i=t.sent,t.t0=this.data,t.t1=i,t.next=12,this.db.getItem(i);case 12:t.t2=t.sent,t.t3={key:t.t1,data:t.t2},t.t0.push.call(t.t0,t.t3);case 15:s++,t.next=4;break;case 18:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),clean:function(){var t=this;this.$alert(this.$t("此操作不可逆！请谨慎操作！"),this.$t("警告"),{confirmButtonText:this.$t("确定清空"),callback:function(e){t.db.clear(),t.data=[],t.$notify({title:t.$t("清空成功"),type:"success",message:t.$t("本地草稿清空成功")})}})},preview:function(t){this.$router.push("/".concat(t.data.post_type,"/").concat(t.data.ID,"?mode=draft&key=").concat(t.key))},del:function(t,e){var s=this;this.db.removeItem(t.key).then((function(){s.data.splice(e,1)}))},onCopy:function(t){this.$notify({title:this.$t("复制成功"),message:this.$t("草稿源码复制成功"),type:"success"})},onError:function(){this.$notify.error({title:this.$t("复制失败"),message:this.$t("请手动复制")})}},filters:{itemName:function(t){var e;return(null==t||null===(e=t.data)||void 0===e?void 0:e.post_title)||"".concat(t.key)},formatDate:function(t){var e,s=null==t||null===(e=t.data)||void 0===e?void 0:e.cache_time;return s?Object(c.b)(new Date(s)):""}},created:function(){this.loadDrafts()},mounted:function(){}},l=(s("97975"),s("2877")),r=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-publish m-draft"},[e("div",{staticClass:"m-draft-header"},[e("h1",{staticClass:"m-title"},[e("i",{staticClass:"el-icon-receiving"}),t._v(" "+t._s(t.$t("草稿箱"))+" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top","popper-class":"m-draft-help-tip"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.$t("以下草稿是编辑器在当前浏览器下产生的临时本地草稿HTML源码，"))),e("br"),t._v(t._s(t.$t("并不存在于服务器中，仅用于断网或窗口异常关闭时恢复。")))]),e("span",{staticClass:"u-help"},[e("i",{staticClass:"el-icon-question"}),t._v(" "),e("span",[t._v(t._s(t.$t("使用帮助")))])])])],1),e("div",{staticClass:"u-op"},[e("el-button",{attrs:{plain:"",icon:"el-icon-delete",size:"small",disabled:!t.isNotNull},on:{click:t.clean}},[t._v(t._s(t.$t("清空")))])],1)]),t.isSupported?[t.isNotNull?e("div",{staticClass:"m-draft-list"},[e("ul",{staticClass:"u-list"},t._l(t.data,(function(s,i){return e("li",{key:i,staticClass:"u-item"},[e("div",{staticClass:"u-label",class:{on:!!s.active}},[e("i",{staticClass:"u-item-icon el-icon-document"}),e("span",{staticClass:"u-item-key"},[t._v(t._s(t._f("itemName")(s))+" "),s.data.cache_time?e("em",{staticClass:"u-item-time"},[t._v("( "+t._s(t._f("formatDate")(s))+" )")]):t._e()]),e("div",{staticClass:"u-op"},[e("el-button",{staticClass:"u-delete",attrs:{type:"primary",plain:"",icon:"el-icon-view",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.preview(s)}}},[t._v(t._s(t.$t("预览")))]),e("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(e){return t.del(s,i)}}},[e("el-button",{staticClass:"u-delete",attrs:{slot:"reference",plain:"",icon:"el-icon-delete",size:"mini"},on:{click:function(t){t.stopPropagation()}},slot:"reference"},[t._v(t._s(t.$t("删除")))])],1)],1)])])})),0)]):e("div",{staticClass:"m-draft-null"},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" "+t._s(t.$t("暂无任何内容")))])]:[e("el-alert",{attrs:{title:t.$t("您的浏览器太旧了，不支持本功能。"),type:"error","show-icon":""}})]],2)}),[],!1,null,null,null);e.default=r.exports},97975:function(t,e,s){"use strict";s("c4ea")},c4ea:function(t,e,s){}}]);
//# sourceMappingURL=chunk-424c01e1.6b0e47e4.js.map